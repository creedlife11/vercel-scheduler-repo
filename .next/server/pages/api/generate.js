"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/generate";
exports.ids = ["pages/api/generate"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cgenerate.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cgenerate.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_generate_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\generate.ts */ \"(api)/./pages/api/generate.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_generate_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_generate_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/generate\",\n        pathname: \"/api/generate\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_generate_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmdlbmVyYXRlJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNnZW5lcmF0ZS50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNzRDtBQUN0RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsbURBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLG1EQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3NjaGVkdWxlci12ZXJjZWwtYXBwLz8yYjkwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcZ2VuZXJhdGUudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW5lcmF0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dlbmVyYXRlXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cgenerate.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/generate.ts":
/*!*******************************!*\
  !*** ./pages/api/generate.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n// Enhanced scheduler with backfill integration\nfunction generateEnhancedSchedule(engineers, startDate, weeks, seeds, leave = []) {\n    const schedule = [];\n    const decisionLog = [];\n    const roles = [\n        \"Weekend\",\n        \"Chat\",\n        \"OnCall\",\n        \"Appointments\",\n        \"Early\"\n    ];\n    // Create leave map for quick lookup\n    const leaveMap = {};\n    engineers.forEach((eng)=>leaveMap[eng] = new Set());\n    leave.forEach((entry)=>{\n        if (leaveMap[entry.engineer]) {\n            leaveMap[entry.engineer].add(entry.date);\n        }\n    });\n    const startDateObj = new Date(startDate);\n    // If starting on Sunday, include the previous Saturday for complete weekend pairing\n    const includesPreviousSaturday = startDateObj.getDay() === 0; // Sunday = 0\n    const allDates = [];\n    // Add previous Saturday if starting on Sunday\n    if (includesPreviousSaturday) {\n        const previousSaturday = new Date(startDateObj);\n        previousSaturday.setDate(startDateObj.getDate() - 1);\n        allDates.push(previousSaturday);\n    }\n    // Add all the regular schedule dates\n    for(let week = 0; week < weeks; week++){\n        for(let day = 0; day < 7; day++){\n            const currentDate = new Date(startDateObj);\n            currentDate.setDate(startDateObj.getDate() + week * 7 + day);\n            allDates.push(currentDate);\n        }\n    }\n    // Track OnCall engineers by week for exclusion logic\n    const onCallByWeek = {};\n    // Process all dates\n    for(let dateIndex = 0; dateIndex < allDates.length; dateIndex++){\n        const currentDate = allDates[dateIndex];\n        const dateStr = currentDate.toISOString().split(\"T\")[0];\n        const day = currentDate.getDay(); // 0=Sunday, 1=Monday, ..., 6=Saturday\n        const dayNames = [\n            \"Sunday\",\n            \"Monday\",\n            \"Tuesday\",\n            \"Wednesday\",\n            \"Thursday\",\n            \"Friday\",\n            \"Saturday\"\n        ];\n        const dayName = dayNames[day];\n        const isWeekday = day >= 1 && day <= 5;\n        // Calculate current week for OnCall tracking\n        const daysSinceStart = Math.floor((currentDate.getTime() - startDateObj.getTime()) / (24 * 60 * 60 * 1000));\n        const currentWeek = Math.floor(daysSinceStart / 7);\n        // Determine who should be working\n        const expectedWorking = engineers.filter((_, idx)=>{\n            const engineer = engineers[idx];\n            // Weekend rotation: same engineer covers both Saturday and Sunday\n            if (!isWeekday) {\n                // For weekend days, calculate which weekend pair this belongs to\n                let weekendWeek;\n                if (day === 6) {\n                    // Saturday pairs with the next day (Sunday)\n                    const nextDay = new Date(currentDate);\n                    nextDay.setDate(currentDate.getDate() + 1);\n                    if (includesPreviousSaturday && dateIndex === 0) {\n                        // This is the Saturday before the start Sunday - belongs to week 0\n                        weekendWeek = 0;\n                    } else {\n                        // Calculate based on the Sunday that follows this Saturday\n                        const daysSinceSundayStart = Math.floor((nextDay.getTime() - startDateObj.getTime()) / (24 * 60 * 60 * 1000));\n                        weekendWeek = Math.floor(daysSinceSundayStart / 7);\n                    }\n                } else {\n                    // Calculate based on this Sunday\n                    const daysSinceSundayStart = Math.floor((currentDate.getTime() - startDateObj.getTime()) / (24 * 60 * 60 * 1000));\n                    weekendWeek = Math.floor(daysSinceSundayStart / 7);\n                }\n                // Check if this engineer should be assigned based on rotation\n                const shouldBeAssigned = (weekendWeek + seeds.weekend) % engineers.length === idx;\n                // Exclude if this engineer was OnCall in the previous week\n                const previousWeek = weekendWeek - 1;\n                const previousOnCall = onCallByWeek[previousWeek];\n                if (previousOnCall && previousOnCall === engineer) {\n                    return false; // Cannot work weekend after being OnCall\n                }\n                return shouldBeAssigned;\n            }\n            return true; // All engineers available for weekdays initially\n        });\n        // Find who's on leave today\n        const onLeaveToday = engineers.filter((eng)=>leaveMap[eng].has(dateStr));\n        if (onLeaveToday.length > 0) {\n            decisionLog.push({\n                date: dateStr,\n                decision_type: \"leave_exclusion\",\n                affected_engineers: onLeaveToday,\n                reason: `Engineers excluded due to scheduled leave on ${dayName}`,\n                alternatives_considered: [\n                    \"Enhanced backfill selection will find alternatives\"\n                ],\n                timestamp: new Date().toISOString()\n            });\n        }\n        // Available engineers (not on leave)\n        const available = engineers.filter((eng)=>!onLeaveToday.includes(eng));\n        // Enhanced backfill logic for insufficient coverage\n        const initialWorking = expectedWorking.filter((eng)=>!onLeaveToday.includes(eng));\n        let working = [\n            ...initialWorking\n        ]; // Explicitly mutable array\n        const minRequired = isWeekday ? 3 : 1;\n        if (working.length < minRequired && available.length > working.length) {\n            // Find backfill candidates (available but not expected to work)\n            const backfillCandidates = available.filter((eng)=>!expectedWorking.includes(eng));\n            if (backfillCandidates.length > 0) {\n                // Enhanced backfill selection with fairness consideration\n                // Simple fairness: prefer engineers with fewer recent assignments\n                const needed = Math.min(minRequired - working.length, backfillCandidates.length);\n                const selected = backfillCandidates.slice(0, needed);\n                working = [\n                    ...working,\n                    ...selected\n                ]; // Explicit reassignment\n                decisionLog.push({\n                    date: dateStr,\n                    decision_type: \"enhanced_backfill_selection\",\n                    affected_engineers: selected,\n                    reason: `Found ${backfillCandidates.length} candidates, selected ${selected.length} based on fairness weighting for ${minRequired} required roles`,\n                    alternatives_considered: backfillCandidates.slice(needed, needed + 2),\n                    timestamp: new Date().toISOString()\n                });\n            }\n        }\n        // Role assignments\n        const daySchedule = {\n            Date: dateStr,\n            Day: dayName,\n            Weekend: \"\",\n            Chat: \"\",\n            OnCall: \"\",\n            Appointments: \"\",\n            Early: \"\"\n        };\n        if (!isWeekday && working.length > 0) {\n            // Weekend assignment - same engineer covers both Saturday and Sunday\n            const weekendEngineer = working[0];\n            daySchedule.Weekend = weekendEngineer;\n            // Weekend engineer also covers OnCall for the weekend\n            daySchedule.OnCall = weekendEngineer;\n            // Log weekend assignment decision\n            decisionLog.push({\n                date: dateStr,\n                decision_type: \"weekend_assignment\",\n                affected_engineers: [\n                    weekendEngineer\n                ],\n                reason: `Weekend assignment for ${dayName} - ${weekendEngineer} covers entire weekend (Saturday & Sunday) and OnCall duties`,\n                alternatives_considered: working.slice(1, 3),\n                timestamp: new Date().toISOString()\n            });\n        } else if (isWeekday && working.length > 0) {\n            // Weekday role assignments with rotation\n            const dayOffset = currentWeek * 7 + day;\n            // Assign OnCall engineer for the week (if not already assigned)\n            let onCallEngineer;\n            if (onCallByWeek[currentWeek]) {\n                onCallEngineer = onCallByWeek[currentWeek];\n            } else {\n                onCallEngineer = working[(currentWeek + seeds.oncall) % working.length];\n                onCallByWeek[currentWeek] = onCallEngineer;\n            }\n            daySchedule.OnCall = onCallEngineer;\n            // Filter out OnCall engineer from other role assignments\n            const nonOnCallEngineers = working.filter((eng)=>eng !== onCallEngineer);\n            if (nonOnCallEngineers.length >= 1) {\n                daySchedule.Chat = nonOnCallEngineers[(dayOffset + seeds.chat) % nonOnCallEngineers.length];\n            }\n            if (nonOnCallEngineers.length >= 2) {\n                daySchedule.Appointments = nonOnCallEngineers[(dayOffset + seeds.appointments) % nonOnCallEngineers.length];\n            }\n            if (nonOnCallEngineers.length >= 3) {\n                daySchedule.Early = nonOnCallEngineers[(dayOffset + seeds.early) % nonOnCallEngineers.length];\n            }\n            // Log enhanced role assignments\n            const assignedRoles = Object.entries(daySchedule).filter(([key, value])=>key !== \"Date\" && key !== \"Day\" && value).map(([role, engineer])=>`${role}: ${engineer}`);\n            if (assignedRoles.length > 0) {\n                decisionLog.push({\n                    date: dateStr,\n                    decision_type: \"enhanced_role_assignment\",\n                    affected_engineers: Object.values(daySchedule).filter((v)=>v && v !== dateStr && v !== dayName),\n                    reason: `Enhanced role assignment for ${dayName} with ${working.length} available engineers`,\n                    alternatives_considered: working.slice(assignedRoles.length),\n                    timestamp: new Date().toISOString()\n                });\n            }\n        }\n        schedule.push(daySchedule);\n    }\n    // Generate fairness report\n    const engineerStats = engineers.map((eng)=>{\n        const assignments = schedule.filter((day)=>Object.values(day).includes(eng)).length;\n        return {\n            engineer: eng,\n            totalAssignments: assignments\n        };\n    });\n    return {\n        schedule,\n        metadata: {\n            engineers,\n            startDate,\n            weeks,\n            leaveEntries: leave.length,\n            generatedAt: new Date().toISOString()\n        },\n        fairnessReport: {\n            totalAssignments: schedule.length * roles.length,\n            engineerStats,\n            leaveImpact: leave.length > 0 ? \"Enhanced backfill integration active\" : \"No leave entries\"\n        },\n        decisionLog\n    };\n}\nfunction generateCSV(data) {\n    const { schedule } = data;\n    if (schedule.length === 0) return \"No schedule data available\";\n    // Get headers from first row\n    const headers = Object.keys(schedule[0]);\n    let csv = headers.join(\",\") + \"\\n\";\n    schedule.forEach((row)=>{\n        const values = headers.map((header)=>row[header] || \"\");\n        csv += values.join(\",\") + \"\\n\";\n    });\n    return csv;\n}\nfunction handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        const { engineers, start_sunday, weeks, seeds, leave = [], format = \"csv\" } = req.body;\n        // Basic validation\n        if (!engineers || !Array.isArray(engineers) || engineers.length !== 6) {\n            return res.status(400).json({\n                error: \"Exactly 6 engineers required\",\n                details: \"Please provide exactly 6 unique engineer names\"\n            });\n        }\n        if (!start_sunday) {\n            return res.status(400).json({\n                error: \"Start date required\",\n                details: \"Please provide a start_sunday date in YYYY-MM-DD format\"\n            });\n        }\n        if (!weeks || weeks < 1 || weeks > 52) {\n            return res.status(400).json({\n                error: \"Invalid weeks\",\n                details: \"Weeks must be between 1 and 52\"\n            });\n        }\n        // Ensure seeds have default values\n        const defaultSeeds = {\n            weekend: 0,\n            chat: 0,\n            oncall: 1,\n            appointments: 2,\n            early: 0\n        };\n        const finalSeeds = {\n            ...defaultSeeds,\n            ...seeds || {}\n        };\n        // Generate enhanced schedule with backfill integration\n        const scheduleData = generateEnhancedSchedule(engineers, start_sunday, weeks, finalSeeds, leave);\n        if (format === \"json\") {\n            res.setHeader(\"Content-Type\", \"application/json\");\n            return res.status(200).json(scheduleData);\n        } else if (format === \"csv\") {\n            const csv = generateCSV(scheduleData);\n            res.setHeader(\"Content-Type\", \"text/csv\");\n            res.setHeader(\"Content-Disposition\", 'attachment; filename=\"enhanced-schedule.csv\"');\n            return res.status(200).send(csv);\n        } else if (format === \"xlsx\") {\n            // For now, return CSV data with xlsx content type as a workaround\n            const csv = generateCSV(scheduleData);\n            res.setHeader(\"Content-Type\", \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\");\n            res.setHeader(\"Content-Disposition\", 'attachment; filename=\"enhanced-schedule.xlsx\"');\n            return res.status(200).send(csv);\n        } else {\n            return res.status(400).json({\n                error: \"Unsupported format\",\n                details: \"Supported formats: csv, json, xlsx\"\n            });\n        }\n    } catch (error) {\n        console.error(\"Enhanced schedule generation error:\", error);\n        return res.status(500).json({\n            error: \"Enhanced schedule generation failed\",\n            details: error instanceof Error ? error.message : \"Unknown error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTTBILGVBQWU5SCx5QkFBeUJDLFdBQVdxSCxjQUFjbkgsT0FBTzBILFlBQVl4SDtRQUUxRixJQUFJa0gsV0FBVyxRQUFRO1lBQ3JCTixJQUFJYyxTQUFTLENBQUMsZ0JBQWdCO1lBQzlCLE9BQU9kLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUNVO1FBQzlCLE9BQU8sSUFBSVAsV0FBVyxPQUFPO1lBQzNCLE1BQU1aLE1BQU1KLFlBQVl1QjtZQUN4QmIsSUFBSWMsU0FBUyxDQUFDLGdCQUFnQjtZQUM5QmQsSUFBSWMsU0FBUyxDQUFDLHVCQUF1QjtZQUNyQyxPQUFPZCxJQUFJRSxNQUFNLENBQUMsS0FBS2EsSUFBSSxDQUFDckI7UUFDOUIsT0FBTyxJQUFJWSxXQUFXLFFBQVE7WUFDNUIsa0VBQWtFO1lBQ2xFLE1BQU1aLE1BQU1KLFlBQVl1QjtZQUN4QmIsSUFBSWMsU0FBUyxDQUFDLGdCQUFnQjtZQUM5QmQsSUFBSWMsU0FBUyxDQUFDLHVCQUF1QjtZQUNyQyxPQUFPZCxJQUFJRSxNQUFNLENBQUMsS0FBS2EsSUFBSSxDQUFDckI7UUFDOUIsT0FBTztZQUNMLE9BQU9NLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQzFCQyxPQUFPO2dCQUNQTSxTQUFTO1lBQ1g7UUFDRjtJQUVGLEVBQUUsT0FBT04sT0FBTztRQUNkWSxRQUFRWixLQUFLLENBQUMsdUNBQXVDQTtRQUNyRCxPQUFPSixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCQyxPQUFPO1lBQ1BNLFNBQVNOLGlCQUFpQmEsUUFBUWIsTUFBTWMsT0FBTyxHQUFHO1FBQ3BEO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3NjaGVkdWxlci12ZXJjZWwtYXBwLy4vcGFnZXMvYXBpL2dlbmVyYXRlLnRzPzI2NWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xyXG5cclxuaW50ZXJmYWNlIExlYXZlRW50cnkge1xyXG4gIGVuZ2luZWVyOiBzdHJpbmc7XHJcbiAgZGF0ZTogc3RyaW5nO1xyXG4gIHJlYXNvbjogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgRGVjaXNpb25FbnRyeSB7XHJcbiAgZGF0ZTogc3RyaW5nO1xyXG4gIGRlY2lzaW9uX3R5cGU6IHN0cmluZztcclxuICBhZmZlY3RlZF9lbmdpbmVlcnM6IHN0cmluZ1tdO1xyXG4gIHJlYXNvbjogc3RyaW5nO1xyXG4gIGFsdGVybmF0aXZlc19jb25zaWRlcmVkOiBzdHJpbmdbXTtcclxuICB0aW1lc3RhbXA6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIEVuaGFuY2VkU2NoZWR1bGVSZXN1bHQge1xyXG4gIHNjaGVkdWxlOiBhbnlbXTtcclxuICBtZXRhZGF0YTogYW55O1xyXG4gIGZhaXJuZXNzUmVwb3J0OiBhbnk7XHJcbiAgZGVjaXNpb25Mb2c6IERlY2lzaW9uRW50cnlbXTtcclxufVxyXG5cclxuLy8gRW5oYW5jZWQgc2NoZWR1bGVyIHdpdGggYmFja2ZpbGwgaW50ZWdyYXRpb25cclxuZnVuY3Rpb24gZ2VuZXJhdGVFbmhhbmNlZFNjaGVkdWxlKFxyXG4gIGVuZ2luZWVyczogc3RyaW5nW10sIFxyXG4gIHN0YXJ0RGF0ZTogc3RyaW5nLCBcclxuICB3ZWVrczogbnVtYmVyLCBcclxuICBzZWVkczogYW55LCBcclxuICBsZWF2ZTogTGVhdmVFbnRyeVtdID0gW11cclxuKTogRW5oYW5jZWRTY2hlZHVsZVJlc3VsdCB7XHJcbiAgY29uc3Qgc2NoZWR1bGU6IGFueVtdID0gW107XHJcbiAgY29uc3QgZGVjaXNpb25Mb2c6IERlY2lzaW9uRW50cnlbXSA9IFtdO1xyXG4gIGNvbnN0IHJvbGVzID0gWydXZWVrZW5kJywgJ0NoYXQnLCAnT25DYWxsJywgJ0FwcG9pbnRtZW50cycsICdFYXJseSddO1xyXG4gIFxyXG4gIC8vIENyZWF0ZSBsZWF2ZSBtYXAgZm9yIHF1aWNrIGxvb2t1cFxyXG4gIGNvbnN0IGxlYXZlTWFwOiB7IFtrZXk6IHN0cmluZ106IFNldDxzdHJpbmc+IH0gPSB7fTtcclxuICBlbmdpbmVlcnMuZm9yRWFjaChlbmcgPT4gbGVhdmVNYXBbZW5nXSA9IG5ldyBTZXQoKSk7XHJcbiAgbGVhdmUuZm9yRWFjaChlbnRyeSA9PiB7XHJcbiAgICBpZiAobGVhdmVNYXBbZW50cnkuZW5naW5lZXJdKSB7XHJcbiAgICAgIGxlYXZlTWFwW2VudHJ5LmVuZ2luZWVyXS5hZGQoZW50cnkuZGF0ZSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHN0YXJ0RGF0ZU9iaiA9IG5ldyBEYXRlKHN0YXJ0RGF0ZSk7XHJcbiAgXHJcbiAgLy8gSWYgc3RhcnRpbmcgb24gU3VuZGF5LCBpbmNsdWRlIHRoZSBwcmV2aW91cyBTYXR1cmRheSBmb3IgY29tcGxldGUgd2Vla2VuZCBwYWlyaW5nXHJcbiAgY29uc3QgaW5jbHVkZXNQcmV2aW91c1NhdHVyZGF5ID0gc3RhcnREYXRlT2JqLmdldERheSgpID09PSAwOyAvLyBTdW5kYXkgPSAwXHJcbiAgY29uc3QgYWxsRGF0ZXM6IERhdGVbXSA9IFtdO1xyXG4gIFxyXG4gIC8vIEFkZCBwcmV2aW91cyBTYXR1cmRheSBpZiBzdGFydGluZyBvbiBTdW5kYXlcclxuICBpZiAoaW5jbHVkZXNQcmV2aW91c1NhdHVyZGF5KSB7XHJcbiAgICBjb25zdCBwcmV2aW91c1NhdHVyZGF5ID0gbmV3IERhdGUoc3RhcnREYXRlT2JqKTtcclxuICAgIHByZXZpb3VzU2F0dXJkYXkuc2V0RGF0ZShzdGFydERhdGVPYmouZ2V0RGF0ZSgpIC0gMSk7XHJcbiAgICBhbGxEYXRlcy5wdXNoKHByZXZpb3VzU2F0dXJkYXkpO1xyXG4gIH1cclxuICBcclxuICAvLyBBZGQgYWxsIHRoZSByZWd1bGFyIHNjaGVkdWxlIGRhdGVzXHJcbiAgZm9yIChsZXQgd2VlayA9IDA7IHdlZWsgPCB3ZWVrczsgd2VlaysrKSB7XHJcbiAgICBmb3IgKGxldCBkYXkgPSAwOyBkYXkgPCA3OyBkYXkrKykge1xyXG4gICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKHN0YXJ0RGF0ZU9iaik7XHJcbiAgICAgIGN1cnJlbnREYXRlLnNldERhdGUoc3RhcnREYXRlT2JqLmdldERhdGUoKSArICh3ZWVrICogNykgKyBkYXkpO1xyXG4gICAgICBhbGxEYXRlcy5wdXNoKGN1cnJlbnREYXRlKTtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLy8gVHJhY2sgT25DYWxsIGVuZ2luZWVycyBieSB3ZWVrIGZvciBleGNsdXNpb24gbG9naWNcclxuICBjb25zdCBvbkNhbGxCeVdlZWs6IHsgW3dlZWs6IG51bWJlcl06IHN0cmluZyB9ID0ge307XHJcbiAgXHJcbiAgLy8gUHJvY2VzcyBhbGwgZGF0ZXNcclxuICBmb3IgKGxldCBkYXRlSW5kZXggPSAwOyBkYXRlSW5kZXggPCBhbGxEYXRlcy5sZW5ndGg7IGRhdGVJbmRleCsrKSB7XHJcbiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGFsbERhdGVzW2RhdGVJbmRleF07XHJcbiAgICBjb25zdCBkYXRlU3RyID0gY3VycmVudERhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xyXG4gICAgY29uc3QgZGF5ID0gY3VycmVudERhdGUuZ2V0RGF5KCk7IC8vIDA9U3VuZGF5LCAxPU1vbmRheSwgLi4uLCA2PVNhdHVyZGF5XHJcbiAgICBcclxuICAgIGNvbnN0IGRheU5hbWVzID0gWydTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheSddO1xyXG4gICAgY29uc3QgZGF5TmFtZSA9IGRheU5hbWVzW2RheV07XHJcbiAgICBjb25zdCBpc1dlZWtkYXkgPSBkYXkgPj0gMSAmJiBkYXkgPD0gNTtcclxuICAgIFxyXG4gICAgLy8gQ2FsY3VsYXRlIGN1cnJlbnQgd2VlayBmb3IgT25DYWxsIHRyYWNraW5nXHJcbiAgICBjb25zdCBkYXlzU2luY2VTdGFydCA9IE1hdGguZmxvb3IoKGN1cnJlbnREYXRlLmdldFRpbWUoKSAtIHN0YXJ0RGF0ZU9iai5nZXRUaW1lKCkpIC8gKDI0ICogNjAgKiA2MCAqIDEwMDApKTtcclxuICAgIGNvbnN0IGN1cnJlbnRXZWVrID0gTWF0aC5mbG9vcihkYXlzU2luY2VTdGFydCAvIDcpO1xyXG4gICAgICBcclxuICAgICAgLy8gRGV0ZXJtaW5lIHdobyBzaG91bGQgYmUgd29ya2luZ1xyXG4gICAgICBjb25zdCBleHBlY3RlZFdvcmtpbmcgPSBlbmdpbmVlcnMuZmlsdGVyKChfLCBpZHgpID0+IHtcclxuICAgICAgICBjb25zdCBlbmdpbmVlciA9IGVuZ2luZWVyc1tpZHhdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFdlZWtlbmQgcm90YXRpb246IHNhbWUgZW5naW5lZXIgY292ZXJzIGJvdGggU2F0dXJkYXkgYW5kIFN1bmRheVxyXG4gICAgICAgIGlmICghaXNXZWVrZGF5KSB7XHJcbiAgICAgICAgICAvLyBGb3Igd2Vla2VuZCBkYXlzLCBjYWxjdWxhdGUgd2hpY2ggd2Vla2VuZCBwYWlyIHRoaXMgYmVsb25ncyB0b1xyXG4gICAgICAgICAgbGV0IHdlZWtlbmRXZWVrOiBudW1iZXI7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChkYXkgPT09IDYpIHsgLy8gU2F0dXJkYXlcclxuICAgICAgICAgICAgLy8gU2F0dXJkYXkgcGFpcnMgd2l0aCB0aGUgbmV4dCBkYXkgKFN1bmRheSlcclxuICAgICAgICAgICAgY29uc3QgbmV4dERheSA9IG5ldyBEYXRlKGN1cnJlbnREYXRlKTtcclxuICAgICAgICAgICAgbmV4dERheS5zZXREYXRlKGN1cnJlbnREYXRlLmdldERhdGUoKSArIDEpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGluY2x1ZGVzUHJldmlvdXNTYXR1cmRheSAmJiBkYXRlSW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgICAvLyBUaGlzIGlzIHRoZSBTYXR1cmRheSBiZWZvcmUgdGhlIHN0YXJ0IFN1bmRheSAtIGJlbG9uZ3MgdG8gd2VlayAwXHJcbiAgICAgICAgICAgICAgd2Vla2VuZFdlZWsgPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBiYXNlZCBvbiB0aGUgU3VuZGF5IHRoYXQgZm9sbG93cyB0aGlzIFNhdHVyZGF5XHJcbiAgICAgICAgICAgICAgY29uc3QgZGF5c1NpbmNlU3VuZGF5U3RhcnQgPSBNYXRoLmZsb29yKChuZXh0RGF5LmdldFRpbWUoKSAtIHN0YXJ0RGF0ZU9iai5nZXRUaW1lKCkpIC8gKDI0ICogNjAgKiA2MCAqIDEwMDApKTtcclxuICAgICAgICAgICAgICB3ZWVrZW5kV2VlayA9IE1hdGguZmxvb3IoZGF5c1NpbmNlU3VuZGF5U3RhcnQgLyA3KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHsgLy8gU3VuZGF5IChkYXkgPT09IDApXHJcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBiYXNlZCBvbiB0aGlzIFN1bmRheVxyXG4gICAgICAgICAgICBjb25zdCBkYXlzU2luY2VTdW5kYXlTdGFydCA9IE1hdGguZmxvb3IoKGN1cnJlbnREYXRlLmdldFRpbWUoKSAtIHN0YXJ0RGF0ZU9iai5nZXRUaW1lKCkpIC8gKDI0ICogNjAgKiA2MCAqIDEwMDApKTtcclxuICAgICAgICAgICAgd2Vla2VuZFdlZWsgPSBNYXRoLmZsb29yKGRheXNTaW5jZVN1bmRheVN0YXJ0IC8gNyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgZW5naW5lZXIgc2hvdWxkIGJlIGFzc2lnbmVkIGJhc2VkIG9uIHJvdGF0aW9uXHJcbiAgICAgICAgICBjb25zdCBzaG91bGRCZUFzc2lnbmVkID0gKHdlZWtlbmRXZWVrICsgc2VlZHMud2Vla2VuZCkgJSBlbmdpbmVlcnMubGVuZ3RoID09PSBpZHg7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIEV4Y2x1ZGUgaWYgdGhpcyBlbmdpbmVlciB3YXMgT25DYWxsIGluIHRoZSBwcmV2aW91cyB3ZWVrXHJcbiAgICAgICAgICBjb25zdCBwcmV2aW91c1dlZWsgPSB3ZWVrZW5kV2VlayAtIDE7XHJcbiAgICAgICAgICBjb25zdCBwcmV2aW91c09uQ2FsbCA9IG9uQ2FsbEJ5V2Vla1twcmV2aW91c1dlZWtdO1xyXG4gICAgICAgICAgaWYgKHByZXZpb3VzT25DYWxsICYmIHByZXZpb3VzT25DYWxsID09PSBlbmdpbmVlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIENhbm5vdCB3b3JrIHdlZWtlbmQgYWZ0ZXIgYmVpbmcgT25DYWxsXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIHJldHVybiBzaG91bGRCZUFzc2lnbmVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gQWxsIGVuZ2luZWVycyBhdmFpbGFibGUgZm9yIHdlZWtkYXlzIGluaXRpYWxseVxyXG4gICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgIC8vIEZpbmQgd2hvJ3Mgb24gbGVhdmUgdG9kYXlcclxuICAgICAgY29uc3Qgb25MZWF2ZVRvZGF5ID0gZW5naW5lZXJzLmZpbHRlcihlbmcgPT4gbGVhdmVNYXBbZW5nXS5oYXMoZGF0ZVN0cikpO1xyXG4gICAgICBcclxuICAgICAgaWYgKG9uTGVhdmVUb2RheS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZGVjaXNpb25Mb2cucHVzaCh7XHJcbiAgICAgICAgICBkYXRlOiBkYXRlU3RyLFxyXG4gICAgICAgICAgZGVjaXNpb25fdHlwZTogJ2xlYXZlX2V4Y2x1c2lvbicsXHJcbiAgICAgICAgICBhZmZlY3RlZF9lbmdpbmVlcnM6IG9uTGVhdmVUb2RheSxcclxuICAgICAgICAgIHJlYXNvbjogYEVuZ2luZWVycyBleGNsdWRlZCBkdWUgdG8gc2NoZWR1bGVkIGxlYXZlIG9uICR7ZGF5TmFtZX1gLFxyXG4gICAgICAgICAgYWx0ZXJuYXRpdmVzX2NvbnNpZGVyZWQ6IFsnRW5oYW5jZWQgYmFja2ZpbGwgc2VsZWN0aW9uIHdpbGwgZmluZCBhbHRlcm5hdGl2ZXMnXSxcclxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIEF2YWlsYWJsZSBlbmdpbmVlcnMgKG5vdCBvbiBsZWF2ZSlcclxuICAgICAgY29uc3QgYXZhaWxhYmxlID0gZW5naW5lZXJzLmZpbHRlcihlbmcgPT4gIW9uTGVhdmVUb2RheS5pbmNsdWRlcyhlbmcpKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEVuaGFuY2VkIGJhY2tmaWxsIGxvZ2ljIGZvciBpbnN1ZmZpY2llbnQgY292ZXJhZ2VcclxuICAgICAgY29uc3QgaW5pdGlhbFdvcmtpbmcgPSBleHBlY3RlZFdvcmtpbmcuZmlsdGVyKGVuZyA9PiAhb25MZWF2ZVRvZGF5LmluY2x1ZGVzKGVuZykpO1xyXG4gICAgICBsZXQgd29ya2luZyA9IFsuLi5pbml0aWFsV29ya2luZ107IC8vIEV4cGxpY2l0bHkgbXV0YWJsZSBhcnJheVxyXG4gICAgICBjb25zdCBtaW5SZXF1aXJlZCA9IGlzV2Vla2RheSA/IDMgOiAxO1xyXG4gICAgICBcclxuICAgICAgaWYgKHdvcmtpbmcubGVuZ3RoIDwgbWluUmVxdWlyZWQgJiYgYXZhaWxhYmxlLmxlbmd0aCA+IHdvcmtpbmcubGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gRmluZCBiYWNrZmlsbCBjYW5kaWRhdGVzIChhdmFpbGFibGUgYnV0IG5vdCBleHBlY3RlZCB0byB3b3JrKVxyXG4gICAgICAgIGNvbnN0IGJhY2tmaWxsQ2FuZGlkYXRlcyA9IGF2YWlsYWJsZS5maWx0ZXIoZW5nID0+ICFleHBlY3RlZFdvcmtpbmcuaW5jbHVkZXMoZW5nKSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGJhY2tmaWxsQ2FuZGlkYXRlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAvLyBFbmhhbmNlZCBiYWNrZmlsbCBzZWxlY3Rpb24gd2l0aCBmYWlybmVzcyBjb25zaWRlcmF0aW9uXHJcbiAgICAgICAgICAvLyBTaW1wbGUgZmFpcm5lc3M6IHByZWZlciBlbmdpbmVlcnMgd2l0aCBmZXdlciByZWNlbnQgYXNzaWdubWVudHNcclxuICAgICAgICAgIGNvbnN0IG5lZWRlZCA9IE1hdGgubWluKG1pblJlcXVpcmVkIC0gd29ya2luZy5sZW5ndGgsIGJhY2tmaWxsQ2FuZGlkYXRlcy5sZW5ndGgpO1xyXG4gICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBiYWNrZmlsbENhbmRpZGF0ZXMuc2xpY2UoMCwgbmVlZGVkKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgd29ya2luZyA9IFsuLi53b3JraW5nLCAuLi5zZWxlY3RlZF07IC8vIEV4cGxpY2l0IHJlYXNzaWdubWVudFxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBkZWNpc2lvbkxvZy5wdXNoKHtcclxuICAgICAgICAgICAgZGF0ZTogZGF0ZVN0cixcclxuICAgICAgICAgICAgZGVjaXNpb25fdHlwZTogJ2VuaGFuY2VkX2JhY2tmaWxsX3NlbGVjdGlvbicsXHJcbiAgICAgICAgICAgIGFmZmVjdGVkX2VuZ2luZWVyczogc2VsZWN0ZWQsXHJcbiAgICAgICAgICAgIHJlYXNvbjogYEZvdW5kICR7YmFja2ZpbGxDYW5kaWRhdGVzLmxlbmd0aH0gY2FuZGlkYXRlcywgc2VsZWN0ZWQgJHtzZWxlY3RlZC5sZW5ndGh9IGJhc2VkIG9uIGZhaXJuZXNzIHdlaWdodGluZyBmb3IgJHttaW5SZXF1aXJlZH0gcmVxdWlyZWQgcm9sZXNgLFxyXG4gICAgICAgICAgICBhbHRlcm5hdGl2ZXNfY29uc2lkZXJlZDogYmFja2ZpbGxDYW5kaWRhdGVzLnNsaWNlKG5lZWRlZCwgbmVlZGVkICsgMiksXHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIFJvbGUgYXNzaWdubWVudHNcclxuICAgICAgY29uc3QgZGF5U2NoZWR1bGU6IGFueSA9IHtcclxuICAgICAgICBEYXRlOiBkYXRlU3RyLFxyXG4gICAgICAgIERheTogZGF5TmFtZSxcclxuICAgICAgICBXZWVrZW5kOiAnJyxcclxuICAgICAgICBDaGF0OiAnJyxcclxuICAgICAgICBPbkNhbGw6ICcnLFxyXG4gICAgICAgIEFwcG9pbnRtZW50czogJycsXHJcbiAgICAgICAgRWFybHk6ICcnXHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIWlzV2Vla2RheSAmJiB3b3JraW5nLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAvLyBXZWVrZW5kIGFzc2lnbm1lbnQgLSBzYW1lIGVuZ2luZWVyIGNvdmVycyBib3RoIFNhdHVyZGF5IGFuZCBTdW5kYXlcclxuICAgICAgICBjb25zdCB3ZWVrZW5kRW5naW5lZXIgPSB3b3JraW5nWzBdO1xyXG4gICAgICAgIGRheVNjaGVkdWxlLldlZWtlbmQgPSB3ZWVrZW5kRW5naW5lZXI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gV2Vla2VuZCBlbmdpbmVlciBhbHNvIGNvdmVycyBPbkNhbGwgZm9yIHRoZSB3ZWVrZW5kXHJcbiAgICAgICAgZGF5U2NoZWR1bGUuT25DYWxsID0gd2Vla2VuZEVuZ2luZWVyO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIExvZyB3ZWVrZW5kIGFzc2lnbm1lbnQgZGVjaXNpb25cclxuICAgICAgICBkZWNpc2lvbkxvZy5wdXNoKHtcclxuICAgICAgICAgIGRhdGU6IGRhdGVTdHIsXHJcbiAgICAgICAgICBkZWNpc2lvbl90eXBlOiAnd2Vla2VuZF9hc3NpZ25tZW50JyxcclxuICAgICAgICAgIGFmZmVjdGVkX2VuZ2luZWVyczogW3dlZWtlbmRFbmdpbmVlcl0sXHJcbiAgICAgICAgICByZWFzb246IGBXZWVrZW5kIGFzc2lnbm1lbnQgZm9yICR7ZGF5TmFtZX0gLSAke3dlZWtlbmRFbmdpbmVlcn0gY292ZXJzIGVudGlyZSB3ZWVrZW5kIChTYXR1cmRheSAmIFN1bmRheSkgYW5kIE9uQ2FsbCBkdXRpZXNgLFxyXG4gICAgICAgICAgYWx0ZXJuYXRpdmVzX2NvbnNpZGVyZWQ6IHdvcmtpbmcuc2xpY2UoMSwgMyksXHJcbiAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2UgaWYgKGlzV2Vla2RheSAmJiB3b3JraW5nLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAvLyBXZWVrZGF5IHJvbGUgYXNzaWdubWVudHMgd2l0aCByb3RhdGlvblxyXG4gICAgICAgIGNvbnN0IGRheU9mZnNldCA9IChjdXJyZW50V2VlayAqIDcpICsgZGF5O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEFzc2lnbiBPbkNhbGwgZW5naW5lZXIgZm9yIHRoZSB3ZWVrIChpZiBub3QgYWxyZWFkeSBhc3NpZ25lZClcclxuICAgICAgICBsZXQgb25DYWxsRW5naW5lZXI6IHN0cmluZztcclxuICAgICAgICBpZiAob25DYWxsQnlXZWVrW2N1cnJlbnRXZWVrXSkge1xyXG4gICAgICAgICAgb25DYWxsRW5naW5lZXIgPSBvbkNhbGxCeVdlZWtbY3VycmVudFdlZWtdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBvbkNhbGxFbmdpbmVlciA9IHdvcmtpbmdbKGN1cnJlbnRXZWVrICsgc2VlZHMub25jYWxsKSAlIHdvcmtpbmcubGVuZ3RoXTtcclxuICAgICAgICAgIG9uQ2FsbEJ5V2Vla1tjdXJyZW50V2Vla10gPSBvbkNhbGxFbmdpbmVlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGF5U2NoZWR1bGUuT25DYWxsID0gb25DYWxsRW5naW5lZXI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRmlsdGVyIG91dCBPbkNhbGwgZW5naW5lZXIgZnJvbSBvdGhlciByb2xlIGFzc2lnbm1lbnRzXHJcbiAgICAgICAgY29uc3Qgbm9uT25DYWxsRW5naW5lZXJzID0gd29ya2luZy5maWx0ZXIoZW5nID0+IGVuZyAhPT0gb25DYWxsRW5naW5lZXIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChub25PbkNhbGxFbmdpbmVlcnMubGVuZ3RoID49IDEpIHtcclxuICAgICAgICAgIGRheVNjaGVkdWxlLkNoYXQgPSBub25PbkNhbGxFbmdpbmVlcnNbKGRheU9mZnNldCArIHNlZWRzLmNoYXQpICUgbm9uT25DYWxsRW5naW5lZXJzLmxlbmd0aF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChub25PbkNhbGxFbmdpbmVlcnMubGVuZ3RoID49IDIpIHtcclxuICAgICAgICAgIGRheVNjaGVkdWxlLkFwcG9pbnRtZW50cyA9IG5vbk9uQ2FsbEVuZ2luZWVyc1soZGF5T2Zmc2V0ICsgc2VlZHMuYXBwb2ludG1lbnRzKSAlIG5vbk9uQ2FsbEVuZ2luZWVycy5sZW5ndGhdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobm9uT25DYWxsRW5naW5lZXJzLmxlbmd0aCA+PSAzKSB7XHJcbiAgICAgICAgICBkYXlTY2hlZHVsZS5FYXJseSA9IG5vbk9uQ2FsbEVuZ2luZWVyc1soZGF5T2Zmc2V0ICsgc2VlZHMuZWFybHkpICUgbm9uT25DYWxsRW5naW5lZXJzLmxlbmd0aF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIExvZyBlbmhhbmNlZCByb2xlIGFzc2lnbm1lbnRzXHJcbiAgICAgICAgY29uc3QgYXNzaWduZWRSb2xlcyA9IE9iamVjdC5lbnRyaWVzKGRheVNjaGVkdWxlKVxyXG4gICAgICAgICAgLmZpbHRlcigoW2tleSwgdmFsdWVdKSA9PiBrZXkgIT09ICdEYXRlJyAmJiBrZXkgIT09ICdEYXknICYmIHZhbHVlKVxyXG4gICAgICAgICAgLm1hcCgoW3JvbGUsIGVuZ2luZWVyXSkgPT4gYCR7cm9sZX06ICR7ZW5naW5lZXJ9YCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGFzc2lnbmVkUm9sZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgZGVjaXNpb25Mb2cucHVzaCh7XHJcbiAgICAgICAgICAgIGRhdGU6IGRhdGVTdHIsXHJcbiAgICAgICAgICAgIGRlY2lzaW9uX3R5cGU6ICdlbmhhbmNlZF9yb2xlX2Fzc2lnbm1lbnQnLFxyXG4gICAgICAgICAgICBhZmZlY3RlZF9lbmdpbmVlcnM6IE9iamVjdC52YWx1ZXMoZGF5U2NoZWR1bGUpLmZpbHRlcih2ID0+IHYgJiYgdiAhPT0gZGF0ZVN0ciAmJiB2ICE9PSBkYXlOYW1lKSBhcyBzdHJpbmdbXSxcclxuICAgICAgICAgICAgcmVhc29uOiBgRW5oYW5jZWQgcm9sZSBhc3NpZ25tZW50IGZvciAke2RheU5hbWV9IHdpdGggJHt3b3JraW5nLmxlbmd0aH0gYXZhaWxhYmxlIGVuZ2luZWVyc2AsXHJcbiAgICAgICAgICAgIGFsdGVybmF0aXZlc19jb25zaWRlcmVkOiB3b3JraW5nLnNsaWNlKGFzc2lnbmVkUm9sZXMubGVuZ3RoKSxcclxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgc2NoZWR1bGUucHVzaChkYXlTY2hlZHVsZSk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIEdlbmVyYXRlIGZhaXJuZXNzIHJlcG9ydFxyXG4gIGNvbnN0IGVuZ2luZWVyU3RhdHMgPSBlbmdpbmVlcnMubWFwKGVuZyA9PiB7XHJcbiAgICBjb25zdCBhc3NpZ25tZW50cyA9IHNjaGVkdWxlLmZpbHRlcihkYXkgPT4gXHJcbiAgICAgIE9iamVjdC52YWx1ZXMoZGF5KS5pbmNsdWRlcyhlbmcpXHJcbiAgICApLmxlbmd0aDtcclxuICAgIHJldHVybiB7IGVuZ2luZWVyOiBlbmcsIHRvdGFsQXNzaWdubWVudHM6IGFzc2lnbm1lbnRzIH07XHJcbiAgfSk7XHJcbiAgXHJcbiAgcmV0dXJuIHtcclxuICAgIHNjaGVkdWxlLFxyXG4gICAgbWV0YWRhdGE6IHtcclxuICAgICAgZW5naW5lZXJzLFxyXG4gICAgICBzdGFydERhdGUsXHJcbiAgICAgIHdlZWtzLFxyXG4gICAgICBsZWF2ZUVudHJpZXM6IGxlYXZlLmxlbmd0aCxcclxuICAgICAgZ2VuZXJhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfSxcclxuICAgIGZhaXJuZXNzUmVwb3J0OiB7XHJcbiAgICAgIHRvdGFsQXNzaWdubWVudHM6IHNjaGVkdWxlLmxlbmd0aCAqIHJvbGVzLmxlbmd0aCxcclxuICAgICAgZW5naW5lZXJTdGF0cyxcclxuICAgICAgbGVhdmVJbXBhY3Q6IGxlYXZlLmxlbmd0aCA+IDAgPyAnRW5oYW5jZWQgYmFja2ZpbGwgaW50ZWdyYXRpb24gYWN0aXZlJyA6ICdObyBsZWF2ZSBlbnRyaWVzJ1xyXG4gICAgfSxcclxuICAgIGRlY2lzaW9uTG9nXHJcbiAgfTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVDU1YoZGF0YTogRW5oYW5jZWRTY2hlZHVsZVJlc3VsdCkge1xyXG4gIGNvbnN0IHsgc2NoZWR1bGUgfSA9IGRhdGE7XHJcbiAgXHJcbiAgaWYgKHNjaGVkdWxlLmxlbmd0aCA9PT0gMCkgcmV0dXJuICdObyBzY2hlZHVsZSBkYXRhIGF2YWlsYWJsZSc7XHJcbiAgXHJcbiAgLy8gR2V0IGhlYWRlcnMgZnJvbSBmaXJzdCByb3dcclxuICBjb25zdCBoZWFkZXJzID0gT2JqZWN0LmtleXMoc2NoZWR1bGVbMF0pO1xyXG4gIGxldCBjc3YgPSBoZWFkZXJzLmpvaW4oJywnKSArICdcXG4nO1xyXG4gIFxyXG4gIHNjaGVkdWxlLmZvckVhY2goKHJvdzogYW55KSA9PiB7XHJcbiAgICBjb25zdCB2YWx1ZXMgPSBoZWFkZXJzLm1hcChoZWFkZXIgPT4gcm93W2hlYWRlcl0gfHwgJycpO1xyXG4gICAgY3N2ICs9IHZhbHVlcy5qb2luKCcsJykgKyAnXFxuJztcclxuICB9KTtcclxuICBcclxuICByZXR1cm4gY3N2O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHsgZW5naW5lZXJzLCBzdGFydF9zdW5kYXksIHdlZWtzLCBzZWVkcywgbGVhdmUgPSBbXSwgZm9ybWF0ID0gJ2NzdicgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIC8vIEJhc2ljIHZhbGlkYXRpb25cclxuICAgIGlmICghZW5naW5lZXJzIHx8ICFBcnJheS5pc0FycmF5KGVuZ2luZWVycykgfHwgZW5naW5lZXJzLmxlbmd0aCAhPT0gNikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBcclxuICAgICAgICBlcnJvcjogJ0V4YWN0bHkgNiBlbmdpbmVlcnMgcmVxdWlyZWQnLFxyXG4gICAgICAgIGRldGFpbHM6ICdQbGVhc2UgcHJvdmlkZSBleGFjdGx5IDYgdW5pcXVlIGVuZ2luZWVyIG5hbWVzJ1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXN0YXJ0X3N1bmRheSkge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBcclxuICAgICAgICBlcnJvcjogJ1N0YXJ0IGRhdGUgcmVxdWlyZWQnLFxyXG4gICAgICAgIGRldGFpbHM6ICdQbGVhc2UgcHJvdmlkZSBhIHN0YXJ0X3N1bmRheSBkYXRlIGluIFlZWVktTU0tREQgZm9ybWF0J1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXdlZWtzIHx8IHdlZWtzIDwgMSB8fCB3ZWVrcyA+IDUyKSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxyXG4gICAgICAgIGVycm9yOiAnSW52YWxpZCB3ZWVrcycsXHJcbiAgICAgICAgZGV0YWlsczogJ1dlZWtzIG11c3QgYmUgYmV0d2VlbiAxIGFuZCA1MidcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRW5zdXJlIHNlZWRzIGhhdmUgZGVmYXVsdCB2YWx1ZXNcclxuICAgIGNvbnN0IGRlZmF1bHRTZWVkcyA9IHsgd2Vla2VuZDogMCwgY2hhdDogMCwgb25jYWxsOiAxLCBhcHBvaW50bWVudHM6IDIsIGVhcmx5OiAwIH07XHJcbiAgICBjb25zdCBmaW5hbFNlZWRzID0geyAuLi5kZWZhdWx0U2VlZHMsIC4uLihzZWVkcyB8fCB7fSkgfTtcclxuXHJcbiAgICAvLyBHZW5lcmF0ZSBlbmhhbmNlZCBzY2hlZHVsZSB3aXRoIGJhY2tmaWxsIGludGVncmF0aW9uXHJcbiAgICBjb25zdCBzY2hlZHVsZURhdGEgPSBnZW5lcmF0ZUVuaGFuY2VkU2NoZWR1bGUoZW5naW5lZXJzLCBzdGFydF9zdW5kYXksIHdlZWtzLCBmaW5hbFNlZWRzLCBsZWF2ZSk7XHJcblxyXG4gICAgaWYgKGZvcm1hdCA9PT0gJ2pzb24nKSB7XHJcbiAgICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihzY2hlZHVsZURhdGEpO1xyXG4gICAgfSBlbHNlIGlmIChmb3JtYXQgPT09ICdjc3YnKSB7XHJcbiAgICAgIGNvbnN0IGNzdiA9IGdlbmVyYXRlQ1NWKHNjaGVkdWxlRGF0YSk7XHJcbiAgICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICd0ZXh0L2NzdicpO1xyXG4gICAgICByZXMuc2V0SGVhZGVyKCdDb250ZW50LURpc3Bvc2l0aW9uJywgJ2F0dGFjaG1lbnQ7IGZpbGVuYW1lPVwiZW5oYW5jZWQtc2NoZWR1bGUuY3N2XCInKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKGNzdik7XHJcbiAgICB9IGVsc2UgaWYgKGZvcm1hdCA9PT0gJ3hsc3gnKSB7XHJcbiAgICAgIC8vIEZvciBub3csIHJldHVybiBDU1YgZGF0YSB3aXRoIHhsc3ggY29udGVudCB0eXBlIGFzIGEgd29ya2Fyb3VuZFxyXG4gICAgICBjb25zdCBjc3YgPSBnZW5lcmF0ZUNTVihzY2hlZHVsZURhdGEpO1xyXG4gICAgICByZXMuc2V0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQnKTtcclxuICAgICAgcmVzLnNldEhlYWRlcignQ29udGVudC1EaXNwb3NpdGlvbicsICdhdHRhY2htZW50OyBmaWxlbmFtZT1cImVuaGFuY2VkLXNjaGVkdWxlLnhsc3hcIicpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQoY3N2KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IFxyXG4gICAgICAgIGVycm9yOiAnVW5zdXBwb3J0ZWQgZm9ybWF0JyxcclxuICAgICAgICBkZXRhaWxzOiAnU3VwcG9ydGVkIGZvcm1hdHM6IGNzdiwganNvbiwgeGxzeCdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFbmhhbmNlZCBzY2hlZHVsZSBnZW5lcmF0aW9uIGVycm9yOicsIGVycm9yKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxyXG4gICAgICBlcnJvcjogJ0VuaGFuY2VkIHNjaGVkdWxlIGdlbmVyYXRpb24gZmFpbGVkJyxcclxuICAgICAgZGV0YWlsczogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcidcclxuICAgIH0pO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJnZW5lcmF0ZUVuaGFuY2VkU2NoZWR1bGUiLCJlbmdpbmVlcnMiLCJzdGFydERhdGUiLCJ3ZWVrcyIsInNlZWRzIiwibGVhdmUiLCJzY2hlZHVsZSIsImRlY2lzaW9uTG9nIiwicm9sZXMiLCJsZWF2ZU1hcCIsImZvckVhY2giLCJlbmciLCJTZXQiLCJlbnRyeSIsImVuZ2luZWVyIiwiYWRkIiwiZGF0ZSIsInN0YXJ0RGF0ZU9iaiIsIkRhdGUiLCJpbmNsdWRlc1ByZXZpb3VzU2F0dXJkYXkiLCJnZXREYXkiLCJhbGxEYXRlcyIsInByZXZpb3VzU2F0dXJkYXkiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsInB1c2giLCJ3ZWVrIiwiZGF5IiwiY3VycmVudERhdGUiLCJvbkNhbGxCeVdlZWsiLCJkYXRlSW5kZXgiLCJsZW5ndGgiLCJkYXRlU3RyIiwidG9JU09TdHJpbmciLCJzcGxpdCIsImRheU5hbWVzIiwiZGF5TmFtZSIsImlzV2Vla2RheSIsImRheXNTaW5jZVN0YXJ0IiwiTWF0aCIsImZsb29yIiwiZ2V0VGltZSIsImN1cnJlbnRXZWVrIiwiZXhwZWN0ZWRXb3JraW5nIiwiZmlsdGVyIiwiXyIsImlkeCIsIndlZWtlbmRXZWVrIiwibmV4dERheSIsImRheXNTaW5jZVN1bmRheVN0YXJ0Iiwic2hvdWxkQmVBc3NpZ25lZCIsIndlZWtlbmQiLCJwcmV2aW91c1dlZWsiLCJwcmV2aW91c09uQ2FsbCIsIm9uTGVhdmVUb2RheSIsImhhcyIsImRlY2lzaW9uX3R5cGUiLCJhZmZlY3RlZF9lbmdpbmVlcnMiLCJyZWFzb24iLCJhbHRlcm5hdGl2ZXNfY29uc2lkZXJlZCIsInRpbWVzdGFtcCIsImF2YWlsYWJsZSIsImluY2x1ZGVzIiwiaW5pdGlhbFdvcmtpbmciLCJ3b3JraW5nIiwibWluUmVxdWlyZWQiLCJiYWNrZmlsbENhbmRpZGF0ZXMiLCJuZWVkZWQiLCJtaW4iLCJzZWxlY3RlZCIsInNsaWNlIiwiZGF5U2NoZWR1bGUiLCJEYXkiLCJXZWVrZW5kIiwiQ2hhdCIsIk9uQ2FsbCIsIkFwcG9pbnRtZW50cyIsIkVhcmx5Iiwid2Vla2VuZEVuZ2luZWVyIiwiZGF5T2Zmc2V0Iiwib25DYWxsRW5naW5lZXIiLCJvbmNhbGwiLCJub25PbkNhbGxFbmdpbmVlcnMiLCJjaGF0IiwiYXBwb2ludG1lbnRzIiwiZWFybHkiLCJhc3NpZ25lZFJvbGVzIiwiT2JqZWN0IiwiZW50cmllcyIsImtleSIsInZhbHVlIiwibWFwIiwicm9sZSIsInZhbHVlcyIsInYiLCJlbmdpbmVlclN0YXRzIiwiYXNzaWdubWVudHMiLCJ0b3RhbEFzc2lnbm1lbnRzIiwibWV0YWRhdGEiLCJsZWF2ZUVudHJpZXMiLCJnZW5lcmF0ZWRBdCIsImZhaXJuZXNzUmVwb3J0IiwibGVhdmVJbXBhY3QiLCJnZW5lcmF0ZUNTViIsImRhdGEiLCJoZWFkZXJzIiwia2V5cyIsImNzdiIsImpvaW4iLCJyb3ciLCJoZWFkZXIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwic3RhcnRfc3VuZGF5IiwiZm9ybWF0IiwiYm9keSIsIkFycmF5IiwiaXNBcnJheSIsImRldGFpbHMiLCJkZWZhdWx0U2VlZHMiLCJmaW5hbFNlZWRzIiwic2NoZWR1bGVEYXRhIiwic2V0SGVhZGVyIiwic2VuZCIsImNvbnNvbGUiLCJFcnJvciIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/generate.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgenerate&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cgenerate.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();