(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(7243)}])},7243:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return v}});var t=s(5893),i=s(7294),n=s(2692),r=s(1317),o=s(6935),l=s(309),c=s(7043),d=s(645),x=s.n(d);let p=e=>{let{data:a,isVisible:s,onClose:n,onDownload:r}=e,[o,l]=(0,i.useState)("csv"),[c,d]=(0,i.useState)(null);if(!s||!a)return null;let p=async(e,a)=>{try{await navigator.clipboard.writeText(e),d(a),setTimeout(()=>d(null),2e3)}catch(e){console.error("Failed to copy to clipboard:",e)}};return(0,t.jsxs)("div",{className:"jsx-8e6145000ac711f1 artifact-panel-overlay",children:[(0,t.jsxs)("div",{"data-testid":"artifact-panel",className:"jsx-8e6145000ac711f1 artifact-panel",children:[(0,t.jsxs)("div",{className:"jsx-8e6145000ac711f1 panel-header",children:[(0,t.jsx)("h3",{className:"jsx-8e6145000ac711f1",children:"Generated Artifacts"}),(0,t.jsx)("button",{onClick:n,className:"jsx-8e6145000ac711f1 close-btn",children:"✕"})]}),(0,t.jsx)("div",{className:"jsx-8e6145000ac711f1 tab-bar",children:[{id:"csv",label:"CSV",icon:"\uD83D\uDCC4"},{id:"xlsx",label:"Excel",icon:"\uD83D\uDCCA"},{id:"json",label:"JSON",icon:"\uD83D\uDD27"},{id:"fairness",label:"Fairness",icon:"⚖️"},{id:"decisions",label:"Decisions",icon:"\uD83D\uDCDD"}].map(e=>(0,t.jsxs)("button",{onClick:()=>l(e.id),className:"jsx-8e6145000ac711f1 "+"tab ".concat(o===e.id?"active":""),children:[(0,t.jsx)("span",{className:"jsx-8e6145000ac711f1 tab-icon",children:e.icon}),(0,t.jsx)("span",{className:"jsx-8e6145000ac711f1 tab-label",children:e.label})]},e.id))}),(0,t.jsx)("div",{className:"jsx-8e6145000ac711f1 panel-content",children:(()=>{switch(o){case"csv":return(0,t.jsxs)("div",{className:"tab-content",children:[(0,t.jsxs)("div",{className:"content-header",children:[(0,t.jsx)("h4",{children:"CSV Preview"}),(0,t.jsx)("div",{className:"header-actions",children:a.csv&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"copy-btn",onClick:()=>p(a.csv,"CSV"),children:"CSV"===c?"✓ Copied!":"\uD83D\uDCCB Copy"}),r&&(0,t.jsx)("button",{className:"download-btn",onClick:()=>r("csv"),children:"Download CSV"})]})})]}),(0,t.jsx)("pre",{className:"content-preview",children:a.csv||"No CSV data available"})]});case"xlsx":return(0,t.jsxs)("div",{className:"tab-content",children:[(0,t.jsxs)("div",{className:"content-header",children:[(0,t.jsx)("h4",{children:"Excel File"}),(0,t.jsx)("div",{className:"header-actions",children:a.xlsx&&r&&(0,t.jsx)("button",{className:"download-btn",onClick:()=>r("xlsx"),children:"Download XLSX"})})]}),(0,t.jsx)("div",{className:"xlsx-info",children:a.xlsx?(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{children:"\uD83D\uDCCA Excel file ready for download"}),(0,t.jsxs)("p",{children:["Size: ",(a.xlsx.size/1024).toFixed(1)," KB"]}),(0,t.jsx)("p",{children:"Contains multiple sheets with schedule data, fairness report, and decision log"})]}):(0,t.jsx)("p",{children:"No Excel data available"})})]});case"json":return(0,t.jsxs)("div",{className:"tab-content",children:[(0,t.jsxs)("div",{className:"content-header",children:[(0,t.jsx)("h4",{children:"JSON Data"}),(0,t.jsx)("div",{className:"header-actions",children:a.json&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:"copy-btn",onClick:()=>p(JSON.stringify(a.json,null,2),"JSON"),children:"JSON"===c?"✓ Copied!":"\uD83D\uDCCB Copy"}),r&&(0,t.jsx)("button",{className:"download-btn",onClick:()=>r("json"),children:"Download JSON"})]})})]}),(0,t.jsx)("pre",{className:"content-preview",children:a.json?JSON.stringify(a.json,null,2):"No JSON data available"})]});case"fairness":return(0,t.jsxs)("div",{className:"tab-content",children:[(0,t.jsxs)("div",{className:"content-header",children:[(0,t.jsx)("h4",{children:"Fairness Report"}),a.fairnessReport&&(0,t.jsx)("button",{className:"copy-btn",onClick:()=>p(JSON.stringify(a.fairnessReport,null,2),"Fairness Report"),children:"Fairness Report"===c?"✓ Copied!":"\uD83D\uDCCB Copy"})]}),(0,t.jsx)("div",{className:"fairness-content","data-testid":"fairness-report",children:a.fairnessReport?(0,t.jsx)("pre",{className:"content-preview",children:JSON.stringify(a.fairnessReport,null,2)}):(0,t.jsx)("p",{children:"No fairness report available"})})]});case"decisions":return(0,t.jsxs)("div",{className:"tab-content",children:[(0,t.jsxs)("div",{className:"content-header",children:[(0,t.jsx)("h4",{children:"Decision Log"}),a.decisionLog&&(0,t.jsx)("button",{className:"copy-btn",onClick:()=>p(JSON.stringify(a.decisionLog,null,2),"Decision Log"),children:"Decision Log"===c?"✓ Copied!":"\uD83D\uDCCB Copy"})]}),(0,t.jsx)("div",{className:"decisions-content","data-testid":"decision-log",children:a.decisionLog&&a.decisionLog.length>0?(0,t.jsx)("pre",{className:"content-preview",children:JSON.stringify(a.decisionLog,null,2)}):(0,t.jsx)("p",{children:"No decision log available"})})]});default:return(0,t.jsx)("div",{children:"Select a tab to view content"})}})()})]}),(0,t.jsx)(x(),{id:"8e6145000ac711f1",children:'.artifact-panel-overlay.jsx-8e6145000ac711f1{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;z-index:1000}.artifact-panel.jsx-8e6145000ac711f1{background:white;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;width:90vw;max-width:1e3px;height:80vh;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04);-moz-box-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04);box-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04)}.panel-header.jsx-8e6145000ac711f1{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:20px 24px;border-bottom:1px solid#e5e7eb}.panel-header.jsx-8e6145000ac711f1 h3.jsx-8e6145000ac711f1{margin:0;font-size:18px;font-weight:600;color:#111827}.close-btn.jsx-8e6145000ac711f1{background:none;border:none;font-size:20px;cursor:pointer;padding:4px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;color:#6b7280}.close-btn.jsx-8e6145000ac711f1:hover{background:#f3f4f6;color:#374151}.tab-bar.jsx-8e6145000ac711f1{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;border-bottom:1px solid#e5e7eb;background:#f9fafb}.tab.jsx-8e6145000ac711f1{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:8px;padding:12px 20px;border:none;background:none;cursor:pointer;font-size:14px;font-weight:500;color:#6b7280;border-bottom:2px solid transparent;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.tab.jsx-8e6145000ac711f1:hover{color:#374151;background:#f3f4f6}.tab.active.jsx-8e6145000ac711f1{color:#3b82f6;border-bottom-color:#3b82f6;background:white}.tab-icon.jsx-8e6145000ac711f1{font-size:16px}.panel-content.jsx-8e6145000ac711f1{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.tab-content.jsx-8e6145000ac711f1{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:hidden}.content-header.jsx-8e6145000ac711f1{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 24px;border-bottom:1px solid#e5e7eb;background:#f9fafb}.header-actions.jsx-8e6145000ac711f1{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.content-header.jsx-8e6145000ac711f1 h4.jsx-8e6145000ac711f1{margin:0;font-size:16px;font-weight:600;color:#111827}.copy-btn.jsx-8e6145000ac711f1{background:#3b82f6;color:white;border:none;padding:6px 12px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;font-size:12px;cursor:pointer;-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.copy-btn.jsx-8e6145000ac711f1:hover{background:#2563eb}.download-btn.jsx-8e6145000ac711f1{background:#10b981;color:white;border:none;padding:6px 12px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;font-size:12px;cursor:pointer;-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.download-btn.jsx-8e6145000ac711f1:hover{background:#059669}.content-preview.jsx-8e6145000ac711f1{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;padding:20px 24px;margin:0;overflow:auto;font-family:"Monaco","Menlo","Ubuntu Mono",monospace;font-size:12px;line-height:1.5;background:#f8fafc;white-space:pre-wrap;word-wrap:break-word}.xlsx-info.jsx-8e6145000ac711f1{padding:20px 24px}.xlsx-info.jsx-8e6145000ac711f1 p.jsx-8e6145000ac711f1{margin:8px 0;color:#374151}.fairness-content.jsx-8e6145000ac711f1,.decisions-content.jsx-8e6145000ac711f1{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column}@media(max-width:768px){.artifact-panel.jsx-8e6145000ac711f1{width:95vw;height:90vh}.tab.jsx-8e6145000ac711f1{padding:10px 12px;font-size:12px}.tab-label.jsx-8e6145000ac711f1{display:none}.content-preview.jsx-8e6145000ac711f1{font-size:11px;padding:16px}}'})]})},b=e=>{let{engineers:a,leave:s,onChange:n,startDate:r,weeks:o=8}=e,[l,d]=(0,i.useState)(!1),[p,b]=(0,i.useState)({engineer:"",date:"",reason:""}),[m,u]=(0,i.useState)([]),[f,g]=(0,i.useState)(null),j=(0,i.useRef)(null),h=()=>{if(!r)return{start:null,end:null};let e=new Date(r),a=new Date(e);return a.setDate(e.getDate()+7*o-1),{start:e,end:a}},w=e=>{let a=[],{start:t,end:i}=h();if(!e.date||!e.engineer)return a;let n=new Date(e.date);t&&i&&(n<t||n>i)&&a.push({date:e.date,engineer:e.engineer,reason:e.reason,conflictType:"invalid_date",message:"Date ".concat(e.date," is outside the schedule range (").concat(t.toISOString().split("T")[0]," to ").concat(i.toISOString().split("T")[0],")")});let r=n.getDay();(0===r||6===r)&&a.push({date:e.date,engineer:e.engineer,reason:e.reason,conflictType:"weekend",message:"Leave on ".concat(e.date," is on a weekend - this may not affect weekday scheduling")});let o=s.find(a=>a.engineer===e.engineer&&a.date===e.date&&a!==e);return o&&a.push({date:e.date,engineer:e.engineer,reason:e.reason,conflictType:"overlap",message:"".concat(e.engineer," already has leave on ").concat(e.date,": ").concat(o.reason)}),a},y=e=>{let a=[];return e.forEach(e=>{let s=w(e);a.push(...s)}),a},k=e=>{let a=s.filter((a,s)=>s!==e);u(y(a)),n(a)},v=e=>{var a;let s=e.trim().split("\n"),t=[],i=(null===(a=s[0])||void 0===a?void 0:a.toLowerCase().includes("engineer"))?1:0;for(let e=i;e<s.length;e++){let a=s[e].trim();if(!a)continue;let i=a.split(",").map(e=>e.trim().replace(/^["']|["']$/g,""));i.length>=2&&t.push({engineer:i[0]||"",date:i[1]||"",reason:i[2]||"Imported leave"})}return t},N=async e=>{var a;let t=null===(a=e.target.files)||void 0===a?void 0:a[0];if(t){g(null);try{let e;if(t.name.endsWith(".csv")){e=await t.text();let a=v(e);if(0===a.length)throw Error("No valid leave entries found in CSV file");let i=[...s,...a],r=y(i);u(r),n(i)}else if(t.name.endsWith(".xlsx"))throw Error("XLSX import not yet implemented. Please use CSV format or add entries manually.");else throw Error("Unsupported file format. Please use CSV or XLSX files.")}catch(e){g(e.message||"Failed to import file")}j.current&&(j.current.value="")}};return(0,t.jsxs)("div",{className:"jsx-61702072a8064e45 leave-manager",children:[(0,t.jsxs)("div",{className:"jsx-61702072a8064e45 leave-header",children:[(0,t.jsx)("h3",{className:"jsx-61702072a8064e45",children:"Leave Management"}),(0,t.jsxs)("div",{className:"jsx-61702072a8064e45 leave-actions",children:[(0,t.jsx)("button",{onClick:()=>{let e=new Blob(["Engineer,Date,Reason\nEngineer A,2025-01-15,Vacation\nEngineer B,2025-01-22,Sick Leave\nEngineer C,2025-02-01,Personal Day"],{type:"text/csv;charset=utf-8"}),a=window.URL.createObjectURL(e),s=document.createElement("a");s.href=a,s.download="leave-template.csv",document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(a)},className:"jsx-61702072a8064e45 btn-secondary",children:"\uD83D\uDCC4 Download Template"}),(0,t.jsx)("button",{onClick:()=>{var e;return null===(e=j.current)||void 0===e?void 0:e.click()},className:"jsx-61702072a8064e45 btn-secondary",children:"\uD83D\uDCC1 Import CSV"}),(0,t.jsx)("button",{onClick:()=>d(!l),className:"jsx-61702072a8064e45 btn-primary",children:l?"Cancel":"+ Add Leave"})]})]}),(0,t.jsx)("input",{ref:j,type:"file",accept:".csv,.xlsx",onChange:N,style:{display:"none"},className:"jsx-61702072a8064e45"}),f&&(0,t.jsx)(c.y,{errors:[f]}),m.length>0&&(0,t.jsxs)("div",{className:"jsx-61702072a8064e45 conflicts-section",children:[(0,t.jsx)("h4",{className:"jsx-61702072a8064e45",children:"⚠️ Conflicts Detected"}),(0,t.jsx)(c.y,{errors:m.filter(e=>"weekend"!==e.conflictType).map(e=>e.message),warnings:m.filter(e=>"weekend"===e.conflictType).map(e=>e.message)})]}),l&&(0,t.jsxs)("div",{className:"jsx-61702072a8064e45 leave-form",children:[(0,t.jsx)("h4",{className:"jsx-61702072a8064e45",children:"Add Leave Entry"}),(0,t.jsxs)("div",{className:"jsx-61702072a8064e45 form-grid",children:[(0,t.jsxs)("div",{className:"jsx-61702072a8064e45",children:[(0,t.jsx)("label",{className:"jsx-61702072a8064e45",children:"Engineer"}),(0,t.jsxs)("select",{value:p.engineer,onChange:e=>b({...p,engineer:e.target.value}),className:"jsx-61702072a8064e45",children:[(0,t.jsx)("option",{value:"",className:"jsx-61702072a8064e45",children:"Select Engineer"}),a.map(e=>(0,t.jsx)("option",{value:e,className:"jsx-61702072a8064e45",children:e},e))]})]}),(0,t.jsxs)("div",{className:"jsx-61702072a8064e45",children:[(0,t.jsx)("label",{className:"jsx-61702072a8064e45",children:"Date"}),(0,t.jsx)("input",{type:"date",value:p.date,onChange:e=>b({...p,date:e.target.value}),className:"jsx-61702072a8064e45"})]}),(0,t.jsxs)("div",{className:"jsx-61702072a8064e45",children:[(0,t.jsx)("label",{className:"jsx-61702072a8064e45",children:"Reason"}),(0,t.jsx)("input",{type:"text",placeholder:"e.g., Vacation, Sick Leave",value:p.reason,onChange:e=>b({...p,reason:e.target.value}),className:"jsx-61702072a8064e45"})]})]}),(0,t.jsxs)("div",{className:"jsx-61702072a8064e45 form-actions",children:[(0,t.jsx)("button",{onClick:()=>{if(!p.engineer||!p.date)return;let e=[...s,p];u(y(e)),n(e),b({engineer:"",date:"",reason:""}),d(!1)},disabled:!p.engineer||!p.date,className:"jsx-61702072a8064e45 btn-primary",children:"Add Leave"}),(0,t.jsx)("button",{onClick:()=>d(!1),className:"jsx-61702072a8064e45 btn-secondary",children:"Cancel"})]})]}),s.length>0&&(0,t.jsxs)("div",{className:"jsx-61702072a8064e45 leave-list",children:[(0,t.jsxs)("h4",{className:"jsx-61702072a8064e45",children:["Current Leave Entries (",s.length,")"]}),(0,t.jsxs)("div",{className:"jsx-61702072a8064e45 leave-table",children:[(0,t.jsxs)("div",{className:"jsx-61702072a8064e45 table-header",children:[(0,t.jsx)("span",{className:"jsx-61702072a8064e45",children:"Engineer"}),(0,t.jsx)("span",{className:"jsx-61702072a8064e45",children:"Date"}),(0,t.jsx)("span",{className:"jsx-61702072a8064e45",children:"Reason"}),(0,t.jsx)("span",{className:"jsx-61702072a8064e45",children:"Actions"})]}),s.map((e,a)=>(0,t.jsxs)("div",{className:"jsx-61702072a8064e45 table-row",children:[(0,t.jsx)("span",{className:"jsx-61702072a8064e45",children:e.engineer}),(0,t.jsx)("span",{className:"jsx-61702072a8064e45",children:e.date}),(0,t.jsx)("span",{className:"jsx-61702072a8064e45",children:e.reason||"No reason provided"}),(0,t.jsx)("button",{onClick:()=>k(a),className:"jsx-61702072a8064e45 btn-danger-small",children:"Remove"})]},a))]})]}),(0,t.jsx)(x(),{id:"61702072a8064e45",children:".leave-manager.jsx-61702072a8064e45{margin:20px 0;padding:20px;border:1px solid#e5e7eb;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;background:#f9fafb}.leave-header.jsx-61702072a8064e45{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:16px}.leave-header.jsx-61702072a8064e45 h3.jsx-61702072a8064e45{margin:0;color:#111827}.leave-actions.jsx-61702072a8064e45{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px}.btn-primary.jsx-61702072a8064e45{background:#3b82f6;color:white;border:none;padding:8px 16px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;cursor:pointer;font-size:14px}.btn-primary.jsx-61702072a8064e45:hover{background:#2563eb}.btn-primary.jsx-61702072a8064e45:disabled{background:#9ca3af;cursor:not-allowed}.btn-secondary.jsx-61702072a8064e45{background:#6b7280;color:white;border:none;padding:8px 16px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;cursor:pointer;font-size:14px}.btn-secondary.jsx-61702072a8064e45:hover{background:#4b5563}.btn-danger-small.jsx-61702072a8064e45{background:#dc2626;color:white;border:none;padding:4px 8px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;cursor:pointer;font-size:12px}.btn-danger-small.jsx-61702072a8064e45:hover{background:#b91c1c}.conflicts-section.jsx-61702072a8064e45{margin:16px 0;padding:12px;background:#fef3c7;border:1px solid#f59e0b;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.conflicts-section.jsx-61702072a8064e45 h4.jsx-61702072a8064e45{margin:0 0 8px 0;color:#92400e}.leave-form.jsx-61702072a8064e45{margin:16px 0;padding:16px;background:white;border:1px solid#d1d5db;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px}.leave-form.jsx-61702072a8064e45 h4.jsx-61702072a8064e45{margin:0 0 12px 0;color:#111827}.form-grid.jsx-61702072a8064e45{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-bottom:16px}.form-grid.jsx-61702072a8064e45 label.jsx-61702072a8064e45{display:block;margin-bottom:4px;font-weight:500;color:#374151}.form-grid.jsx-61702072a8064e45 input.jsx-61702072a8064e45,.form-grid.jsx-61702072a8064e45 select.jsx-61702072a8064e45{width:100%;padding:8px;border:1px solid#d1d5db;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:14px}.form-actions.jsx-61702072a8064e45{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px}.leave-list.jsx-61702072a8064e45{margin-top:16px}.leave-list.jsx-61702072a8064e45 h4.jsx-61702072a8064e45{margin:0 0 12px 0;color:#111827}.leave-table.jsx-61702072a8064e45{background:white;border:1px solid#d1d5db;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;overflow:hidden}.table-header.jsx-61702072a8064e45{display:grid;grid-template-columns:1fr 1fr 1fr auto;gap:12px;padding:12px;background:#f3f4f6;font-weight:600;color:#374151;border-bottom:1px solid#d1d5db}.table-row.jsx-61702072a8064e45{display:grid;grid-template-columns:1fr 1fr 1fr auto;gap:12px;padding:12px;border-bottom:1px solid#e5e7eb;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.table-row.jsx-61702072a8064e45:last-child{border-bottom:none}.table-row.jsx-61702072a8064e45:hover{background:#f9fafb}@media(max-width:768px){.leave-header.jsx-61702072a8064e45{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;gap:12px}.leave-actions.jsx-61702072a8064e45{-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.form-grid.jsx-61702072a8064e45{grid-template-columns:1fr}.table-header.jsx-61702072a8064e45,.table-row.jsx-61702072a8064e45{grid-template-columns:1fr;gap:4px}.table-header.jsx-61702072a8064e45 span.jsx-61702072a8064e45,.table-row.jsx-61702072a8064e45 span.jsx-61702072a8064e45{padding:4px 0}}"})]})},m=[{id:"ops-default",name:"Ops Default",description:"Standard operations rotation with balanced coverage",seeds:{weekend:0,chat:0,oncall:1,appointments:2,early:0},weeks:8,created:"2025-01-01",isDefault:!0},{id:"holiday-light",name:"Holiday Light",description:"Reduced rotation for holiday periods with minimal shifts",seeds:{weekend:2,chat:1,oncall:0,appointments:1,early:3},weeks:4,created:"2025-01-01",isDefault:!0},{id:"eu-rotation",name:"EU Rotation",description:"European timezone focused rotation with early shift emphasis",seeds:{weekend:1,chat:2,oncall:3,appointments:0,early:1},weeks:12,created:"2025-01-01",isDefault:!0}],u=e=>{let{currentSeeds:a,currentWeeks:s,onApplyPreset:n}=e,[r,o]=(0,i.useState)([]),[l,d]=(0,i.useState)(!1),[p,b]=(0,i.useState)(!1),[u,f]=(0,i.useState)(""),[g,j]=(0,i.useState)(""),[h,w]=(0,i.useState)(""),[y,k]=(0,i.useState)(null),[v,N]=(0,i.useState)(null);(0,i.useEffect)(()=>{C()},[]);let C=()=>{try{let e=localStorage.getItem("scheduler-presets"),a=e?JSON.parse(e):[],s=[...m,...a];o(s)}catch(e){console.error("Failed to load presets:",e),o(m)}},z=e=>{try{let a=e.filter(e=>!e.isDefault);localStorage.setItem("scheduler-presets",JSON.stringify(a))}catch(e){throw console.error("Failed to save presets:",e),Error("Failed to save presets to local storage")}},S=e=>{let a=r.find(a=>a.id===e);if(null==a?void 0:a.isDefault){k("Cannot delete default presets");return}if(confirm("Are you sure you want to delete this preset?"))try{let a=r.filter(a=>a.id!==e);o(a),z(a),N("Preset deleted successfully!"),setTimeout(()=>N(null),3e3)}catch(e){k(e.message||"Failed to delete preset")}},D=e=>{n(e.seeds,e.weeks),N("Applied preset: ".concat(e.name)),setTimeout(()=>N(null),3e3)};return(0,t.jsxs)("div",{className:"jsx-ce0163a15929e2b2 preset-manager",children:[(0,t.jsxs)("div",{className:"jsx-ce0163a15929e2b2 preset-header",children:[(0,t.jsx)("h3",{className:"jsx-ce0163a15929e2b2",children:"Configuration Presets"}),(0,t.jsxs)("div",{className:"jsx-ce0163a15929e2b2 preset-actions",children:[(0,t.jsx)("button",{onClick:()=>b(!0),className:"jsx-ce0163a15929e2b2 btn-secondary",children:"\uD83D\uDCE5 Import"}),(0,t.jsx)("button",{onClick:()=>{try{let e=r.filter(e=>!e.isDefault),a={version:"1.0",exported:new Date().toISOString(),presets:e},s=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),t=window.URL.createObjectURL(s),i=document.createElement("a");i.href=t,i.download="scheduler-presets-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(i),i.click(),i.remove(),window.URL.revokeObjectURL(t),N("Presets exported successfully!"),setTimeout(()=>N(null),3e3)}catch(e){k(e.message||"Failed to export presets")}},className:"jsx-ce0163a15929e2b2 btn-secondary",children:"\uD83D\uDCE4 Export"}),(0,t.jsx)("button",{onClick:()=>d(!0),className:"jsx-ce0163a15929e2b2 btn-primary",children:"\uD83D\uDCBE Save Current"})]})]}),y&&(0,t.jsx)(c.y,{errors:[y]}),v&&(0,t.jsxs)("div",{className:"jsx-ce0163a15929e2b2 success-message",children:["✅ ",v]}),(0,t.jsx)("div",{className:"jsx-ce0163a15929e2b2 presets-grid",children:r.map(e=>(0,t.jsxs)("div",{className:"jsx-ce0163a15929e2b2 preset-card",children:[(0,t.jsxs)("div",{className:"jsx-ce0163a15929e2b2 preset-info",children:[(0,t.jsxs)("h4",{className:"jsx-ce0163a15929e2b2",children:[e.name,e.isDefault&&(0,t.jsx)("span",{className:"jsx-ce0163a15929e2b2 default-badge",children:"Default"})]}),(0,t.jsx)("p",{className:"jsx-ce0163a15929e2b2",children:e.description}),(0,t.jsxs)("div",{className:"jsx-ce0163a15929e2b2 preset-details",children:[(0,t.jsxs)("span",{className:"jsx-ce0163a15929e2b2",children:["Weeks: ",e.weeks]}),(0,t.jsxs)("span",{className:"jsx-ce0163a15929e2b2",children:["Seeds: W:",e.seeds.weekend," C:",e.seeds.chat," O:",e.seeds.oncall," A:",e.seeds.appointments," E:",e.seeds.early]})]})]}),(0,t.jsxs)("div",{className:"jsx-ce0163a15929e2b2 preset-actions-card",children:[(0,t.jsx)("button",{onClick:()=>D(e),className:"jsx-ce0163a15929e2b2 btn-apply",children:"Apply"}),!e.isDefault&&(0,t.jsx)("button",{onClick:()=>S(e.id),className:"jsx-ce0163a15929e2b2 btn-delete",children:"Delete"})]})]},e.id))}),l&&(0,t.jsx)("div",{className:"jsx-ce0163a15929e2b2 modal-overlay",children:(0,t.jsxs)("div",{className:"jsx-ce0163a15929e2b2 modal",children:[(0,t.jsx)("h3",{className:"jsx-ce0163a15929e2b2",children:"Save Current Configuration"}),(0,t.jsxs)("div",{className:"jsx-ce0163a15929e2b2 form-group",children:[(0,t.jsx)("label",{className:"jsx-ce0163a15929e2b2",children:"Preset Name"}),(0,t.jsx)("input",{type:"text",value:u,onChange:e=>f(e.target.value),placeholder:"e.g., My Custom Rotation",maxLength:50,className:"jsx-ce0163a15929e2b2"})]}),(0,t.jsxs)("div",{className:"jsx-ce0163a15929e2b2 form-group",children:[(0,t.jsx)("label",{className:"jsx-ce0163a15929e2b2",children:"Description (optional)"}),(0,t.jsx)("textarea",{value:g,onChange:e=>j(e.target.value),placeholder:"Describe when to use this preset...",maxLength:200,rows:3,className:"jsx-ce0163a15929e2b2"})]}),(0,t.jsxs)("div",{className:"jsx-ce0163a15929e2b2 current-config",children:[(0,t.jsx)("h4",{className:"jsx-ce0163a15929e2b2",children:"Current Configuration:"}),(0,t.jsxs)("p",{className:"jsx-ce0163a15929e2b2",children:["Weeks: ",s]}),(0,t.jsxs)("p",{className:"jsx-ce0163a15929e2b2",children:["Seeds: Weekend:",a.weekend,", Chat:",a.chat,", OnCall:",a.oncall,", Appointments:",a.appointments,", Early:",a.early]})]}),(0,t.jsxs)("div",{className:"jsx-ce0163a15929e2b2 modal-actions",children:[(0,t.jsx)("button",{onClick:()=>{if(!u.trim()){k("Preset name is required");return}if(r.some(e=>e.name.toLowerCase()===u.trim().toLowerCase())){k("A preset with this name already exists");return}let e={id:"user-".concat(Date.now()),name:u.trim(),description:g.trim()||"Custom preset",seeds:{...a},weeks:s,created:new Date().toISOString().split("T")[0],isDefault:!1};try{let a=[...r,e];o(a),z(a),d(!1),f(""),j(""),k(null),N("Preset saved successfully!"),setTimeout(()=>N(null),3e3)}catch(e){k(e.message||"Failed to save preset")}},className:"jsx-ce0163a15929e2b2 btn-primary",children:"Save Preset"}),(0,t.jsx)("button",{onClick:()=>d(!1),className:"jsx-ce0163a15929e2b2 btn-secondary",children:"Cancel"})]})]})}),p&&(0,t.jsx)("div",{className:"jsx-ce0163a15929e2b2 modal-overlay",children:(0,t.jsxs)("div",{className:"jsx-ce0163a15929e2b2 modal",children:[(0,t.jsx)("h3",{className:"jsx-ce0163a15929e2b2",children:"Import Presets"}),(0,t.jsxs)("div",{className:"jsx-ce0163a15929e2b2 form-group",children:[(0,t.jsx)("label",{className:"jsx-ce0163a15929e2b2",children:"Paste Preset Data (JSON)"}),(0,t.jsx)("textarea",{value:h,onChange:e=>w(e.target.value),placeholder:"Paste the exported preset JSON data here...",rows:8,className:"jsx-ce0163a15929e2b2"})]}),(0,t.jsxs)("div",{className:"jsx-ce0163a15929e2b2 modal-actions",children:[(0,t.jsx)("button",{onClick:()=>{try{if(!h.trim()){k("Please paste the preset data");return}let e=JSON.parse(h);if(!e.presets||!Array.isArray(e.presets))throw Error("Invalid preset format");let a=e.presets.map((e,a)=>{if(!e.name||!e.seeds)throw Error("Invalid preset at position ".concat(a+1));return{id:"imported-".concat(Date.now(),"-").concat(a),name:e.name,description:e.description||"Imported preset",seeds:{weekend:e.seeds.weekend||0,chat:e.seeds.chat||0,oncall:e.seeds.oncall||1,appointments:e.seeds.appointments||2,early:e.seeds.early||0},weeks:e.weeks||8,created:new Date().toISOString().split("T")[0],isDefault:!1}}),s=a.filter(e=>r.some(a=>a.name.toLowerCase()===e.name.toLowerCase()));if(s.length>0){let e=s.map(e=>e.name).join(", ");if(!confirm("The following presets already exist and will be skipped: ".concat(e,". Continue?")))return}let t=a.filter(e=>!r.some(a=>a.name.toLowerCase()===e.name.toLowerCase()));if(0===t.length){k("No new presets to import");return}let i=[...r,...t];o(i),z(i),b(!1),w(""),k(null),N("Imported ".concat(t.length," preset(s) successfully!")),setTimeout(()=>N(null),3e3)}catch(e){k(e.message||"Failed to import presets")}},className:"jsx-ce0163a15929e2b2 btn-primary",children:"Import Presets"}),(0,t.jsx)("button",{onClick:()=>b(!1),className:"jsx-ce0163a15929e2b2 btn-secondary",children:"Cancel"})]})]})}),(0,t.jsx)(x(),{id:"ce0163a15929e2b2",children:".preset-manager.jsx-ce0163a15929e2b2{margin:20px 0;padding:20px;border:1px solid#e5e7eb;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;background:#f9fafb}.preset-header.jsx-ce0163a15929e2b2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:16px}.preset-header.jsx-ce0163a15929e2b2 h3.jsx-ce0163a15929e2b2{margin:0;color:#111827}.preset-actions.jsx-ce0163a15929e2b2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px}.btn-primary.jsx-ce0163a15929e2b2{background:#3b82f6;color:white;border:none;padding:8px 16px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;cursor:pointer;font-size:14px}.btn-primary.jsx-ce0163a15929e2b2:hover{background:#2563eb}.btn-secondary.jsx-ce0163a15929e2b2{background:#6b7280;color:white;border:none;padding:8px 16px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;cursor:pointer;font-size:14px}.btn-secondary.jsx-ce0163a15929e2b2:hover{background:#4b5563}.success-message.jsx-ce0163a15929e2b2{background:#d1fae5;border:1px solid#10b981;color:#065f46;padding:8px 12px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;margin-bottom:16px}.presets-grid.jsx-ce0163a15929e2b2{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px}.preset-card.jsx-ce0163a15929e2b2{background:white;border:1px solid#d1d5db;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.preset-info.jsx-ce0163a15929e2b2 h4.jsx-ce0163a15929e2b2{margin:0 0 8px 0;color:#111827;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:8px}.default-badge.jsx-ce0163a15929e2b2{background:#fbbf24;color:#92400e;font-size:10px;padding:2px 6px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-weight:500}.preset-info.jsx-ce0163a15929e2b2 p.jsx-ce0163a15929e2b2{margin:0 0 12px 0;color:#6b7280;font-size:14px}.preset-details.jsx-ce0163a15929e2b2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:4px;font-size:12px;color:#4b5563}.preset-actions-card.jsx-ce0163a15929e2b2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px;margin-top:12px}.btn-apply.jsx-ce0163a15929e2b2{background:#10b981;color:white;border:none;padding:6px 12px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;cursor:pointer;font-size:12px;-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1}.btn-apply.jsx-ce0163a15929e2b2:hover{background:#059669}.btn-delete.jsx-ce0163a15929e2b2{background:#dc2626;color:white;border:none;padding:6px 12px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;cursor:pointer;font-size:12px}.btn-delete.jsx-ce0163a15929e2b2:hover{background:#b91c1c}.modal-overlay.jsx-ce0163a15929e2b2{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;z-index:1000}.modal.jsx-ce0163a15929e2b2{background:white;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:24px;width:90vw;max-width:500px;max-height:80vh;overflow-y:auto}.modal.jsx-ce0163a15929e2b2 h3.jsx-ce0163a15929e2b2{margin:0 0 20px 0;color:#111827}.form-group.jsx-ce0163a15929e2b2{margin-bottom:16px}.form-group.jsx-ce0163a15929e2b2 label.jsx-ce0163a15929e2b2{display:block;margin-bottom:4px;font-weight:500;color:#374151}.form-group.jsx-ce0163a15929e2b2 input.jsx-ce0163a15929e2b2,.form-group.jsx-ce0163a15929e2b2 textarea.jsx-ce0163a15929e2b2{width:100%;padding:8px;border:1px solid#d1d5db;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;font-size:14px;font-family:inherit}.current-config.jsx-ce0163a15929e2b2{background:#f3f4f6;padding:12px;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;margin-bottom:20px}.current-config.jsx-ce0163a15929e2b2 h4.jsx-ce0163a15929e2b2{margin:0 0 8px 0;color:#111827}.current-config.jsx-ce0163a15929e2b2 p.jsx-ce0163a15929e2b2{margin:4px 0;color:#4b5563;font-size:14px}.modal-actions.jsx-ce0163a15929e2b2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:8px;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}@media(max-width:768px){.preset-header.jsx-ce0163a15929e2b2{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;gap:12px}.preset-actions.jsx-ce0163a15929e2b2{-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.presets-grid.jsx-ce0163a15929e2b2{grid-template-columns:1fr}.modal.jsx-ce0163a15929e2b2{width:95vw;padding:16px}}"})]})};var f=s(3299),g=s(1163);function j(e){var a,s,n,r;let{children:o,requireAuth:l=!0,requiredRole:c,allowBypass:d=!1}=e,{data:x,status:p}=(0,f.useSession)(),b=(0,g.useRouter)();console.log("AuthWrapper - Status:",p,"Session:",x);let[m,u]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{d&&"true"===new URLSearchParams(window.location.search).get("bypass")&&(u(!0),console.log("Authentication bypassed via URL parameter"))},[d]),(0,i.useEffect)(()=>{var e,a;if("loading"!==p){if(l&&!x){b.push("/auth/signin");return}if(c&&(null==x?void 0:null===(e=x.user)||void 0===e?void 0:e.role)){let e={VIEWER:0,EDITOR:1,ADMIN:2};if((null!==(a=e[x.user.role])&&void 0!==a?a:0)<e[c]){b.push("/auth/error?error=Forbidden");return}}}},[x,p,l,c,b]),"loading"===p)?(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontFamily:"Inter, system-ui, Arial"},children:(0,t.jsx)("div",{children:"Loading..."})}):!l||x||m?(0,t.jsxs)("div",{children:[m&&(0,t.jsx)("div",{style:{padding:"8px 16px",backgroundColor:"#fef3c7",borderBottom:"1px solid #f59e0b",textAlign:"center",fontSize:14,color:"#92400e"},children:"⚠️ Authentication bypassed for testing"}),(x||m)&&(0,t.jsxs)("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 20px",borderBottom:"1px solid #e5e7eb",backgroundColor:"white",fontFamily:"Inter, system-ui, Arial"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16},children:[(0,t.jsx)("h2",{style:{margin:0,fontSize:18},children:"Team Scheduler"}),(null==x?void 0:null===(a=x.user)||void 0===a?void 0:a.teams)&&x.user.teams.length>0&&(0,t.jsx)("select",{style:{padding:"4px 8px",border:"1px solid #d1d5db",borderRadius:4,fontSize:14},children:x.user.teams.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16},children:[(0,t.jsx)("span",{style:{fontSize:14,color:"#6b7280"},children:m?"Test User":(null==x?void 0:null===(s=x.user)||void 0===s?void 0:s.name)||(null==x?void 0:null===(n=x.user)||void 0===n?void 0:n.email)}),(0,t.jsx)("span",{style:{fontSize:12,padding:"2px 6px",backgroundColor:"#f3f4f6",borderRadius:4,color:"#374151"},children:m?"TEST":null==x?void 0:null===(r=x.user)||void 0===r?void 0:r.role}),(0,t.jsx)("button",{onClick:()=>(0,f.signOut)({callbackUrl:"/auth/signin"}),style:{padding:"6px 12px",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:4,fontSize:14,cursor:"pointer"},children:"Sign Out"})]})]}),(0,t.jsx)("main",{children:o})]}):null}let h={enableFairnessReporting:{enabled:!0,description:"Fairness reporting"},enableDecisionLogging:{enabled:!0,description:"Decision logging"},enableAdvancedValidation:{enabled:!0,description:"Advanced validation"},enablePerformanceMonitoring:{enabled:!0,description:"Performance monitoring"},enableInvariantChecking:{enabled:!0,description:"Invariant checking"},enableArtifactPanel:{enabled:!0,description:"Artifact panel"},enableLeaveManagement:{enabled:!0,description:"Leave management"},enablePresetManager:{enabled:!0,description:"Preset manager"},enableAuthenticationSystem:{enabled:!1,description:"Authentication system"},enableRateLimiting:{enabled:!1,description:"Rate limiting"},enableTeamStorage:{enabled:!0,description:"Team storage"},enableArtifactSharing:{enabled:!0,description:"Artifact sharing"},enableExperimentalFeatures:{enabled:!1,description:"Experimental features"},enableAdvancedAnalytics:{enabled:!1,description:"Advanced analytics"},enableDarkMode:{enabled:!0,description:"Dark mode"},enableKeyboardShortcuts:{enabled:!0,description:"Keyboard shortcuts"},enableTooltips:{enabled:!0,description:"Tooltips"},maxWeeksAllowed:52,fairnessThreshold:.8,maxRequestSizeMB:2},w=null,y=0;function k(){let[e,a]=(0,i.useState)(w),[s,t]=(0,i.useState)(!w),[n,r]=(0,i.useState)(null),o=(0,i.useCallback)(async()=>{let e=Date.now();if(w&&e-y<3e5){a(w),t(!1);return}try{t(!0),r(null);let s=await fetch("/api/config/features",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(s.ok||(console.warn("Main features endpoint failed (".concat(s.status,"), trying fallback")),s=await fetch("/api/config/features-simple",{method:"GET",headers:{"Content-Type":"application/json"}})),!s.ok)throw Error("Failed to fetch feature flags: ".concat(s.status," ").concat(s.statusText));let i=await s.json(),n={...h,...i.features};w=n,y=e,a(n)}catch(s){let e=s instanceof Error?s.message:"Unknown error occurred";r(e),a(w||h),console.warn("Failed to fetch feature flags, using fallback:",e)}finally{t(!1)}},[]),l=(0,i.useCallback)(async()=>{w=null,y=0,await o()},[o]),c=(0,i.useCallback)(a=>{if(!e)return!1;let s=e[a];return"object"==typeof s&&null!==s&&"enabled"in s?s.enabled:!!s},[e]),d=(0,i.useCallback)((a,s)=>{if(!e)return s;let t=e[a];return null==t?s:"object"==typeof t&&"enabled"in t?t.enabled:t},[e]);return(0,i.useEffect)(()=>{o()},[o]),{features:e,loading:s,error:n,refetch:l,isEnabled:c,getValue:d}}function v(){let[e,a]=(0,i.useState)("Engineer A, Engineer B, Engineer C, Engineer D, Engineer E, Engineer F"),[s,d]=(0,i.useState)(""),[x,m]=(0,i.useState)(8),[f,g]=(0,i.useState)("csv"),[h,w]=(0,i.useState)({weekend:0,chat:0,oncall:1,appointments:2,early:0}),[y,v]=(0,i.useState)(!1),[N,C]=(0,i.useState)(null),[z,S]=(0,i.useState)({isValid:!1,errors:[],warnings:[]}),[D,E]=(0,i.useState)(null),[L,T]=(0,i.useState)(!1),[O,R]=(0,i.useState)([]),A=function(){let{isEnabled:e}=k();return e("enableArtifactPanel")}(),I=function(){let{isEnabled:e}=k();return e("enableLeaveManagement")}(),P=function(){let{isEnabled:e}=k();return e("enablePresetManager")}(),F=function(){let{getValue:e}=k();return e("maxWeeksAllowed",52)}();(0,i.useEffect)(()=>{let a={engineers:e.split(",").map(e=>e.trim()).filter(Boolean),start_sunday:s,weeks:x,seeds:h,leave:O,format:f};S((0,n.zX)(a))},[e,s,x,h,f,O]);let V=async()=>{v(!0),C(null);try{let a={engineers:e.split(",").map(e=>e.trim()).filter(Boolean),start_sunday:s,weeks:x,seeds:h,leave:O},t=(0,n.zX)({...a,format:f});if(!t.isValid)throw Error("Validation failed: ".concat(t.errors.join(", ")));let i={};for(let e of["csv","xlsx","json"])try{let s=await fetch("/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...a,format:e})});if(!s.ok){let a=await s.text();console.warn("Failed to generate ".concat(e,": ").concat(a));continue}"json"===e?i[e]=await s.json():"xlsx"===e?i[e]=await s.blob():i[e]=await s.text()}catch(a){console.warn("Error generating ".concat(e,":"),a)}if(0===Object.keys(i).length)throw Error("Failed to generate any format");i.json&&(i.fairnessReport=i.json.fairnessReport,i.decisionLog=i.json.decisionLog),E(i),T(!0)}catch(e){C(e.message||"Generation failed")}finally{v(!1)}};return(0,t.jsx)(j,{requiredRole:"EDITOR",allowBypass:!0,requireAuth:!1,children:(0,t.jsxs)("div",{style:{maxWidth:800,margin:"40px auto",fontFamily:"Inter, system-ui, Arial"},children:[(0,t.jsx)("h1",{children:"Team Scheduler"}),(0,t.jsx)("p",{children:"Week starts on Sunday. Enter exactly 6 engineers with unique names."}),(0,t.jsx)("div",{style:{marginBottom:20},children:(0,t.jsx)(r.j,{value:e,onChange:a})}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:20,marginBottom:20},children:[(0,t.jsx)(o.m,{value:s,onChange:d}),(0,t.jsx)(l.A,{value:x,onChange:m,maxWeeks:F})]}),(0,t.jsx)("h3",{style:{marginTop:20},children:"Seeds (fair rotation)"}),(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:12},children:["weekend","chat","oncall","appointments","early"].map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:e}),(0,t.jsx)("input",{type:"number",min:0,max:5,value:h[e],onChange:a=>w({...h,[e]:parseInt(a.target.value||"0")}),style:{width:"100%"}})]},e))}),P&&(0,t.jsx)(u,{currentSeeds:h,currentWeeks:x,onApplyPreset:(e,a)=>{w(e),m(a)}}),I&&(0,t.jsx)(b,{engineers:e.split(",").map(e=>e.trim()).filter(Boolean),leave:O,onChange:R,startDate:s,weeks:x}),(0,t.jsx)("h3",{style:{marginTop:20},children:"Output"}),(0,t.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"radio",name:"fmt",checked:"csv"===f,onChange:()=>g("csv")})," CSV"]}),(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"radio",name:"fmt",checked:"xlsx"===f,onChange:()=>g("xlsx")})," Excel (.xlsx)"]}),(0,t.jsxs)("label",{children:[(0,t.jsx)("input",{type:"radio",name:"fmt",checked:"json"===f,onChange:()=>g("json")})," JSON"]})]}),(0,t.jsxs)("div",{style:{marginTop:20},children:[(0,t.jsx)("button",{onClick:V,disabled:y||!z.isValid,style:{padding:"12px 20px",fontSize:"16px",backgroundColor:z.isValid?"#3b82f6":"#9ca3af",color:"white",border:"none",borderRadius:"6px",cursor:z.isValid?"pointer":"not-allowed",opacity:y?.7:1},children:y?"Generating...":"Generate Schedule"}),D&&A&&(0,t.jsx)("button",{onClick:()=>T(!0),style:{padding:"12px 20px",fontSize:"16px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",marginLeft:"12px"},children:"View Artifacts"}),!z.isValid&&z.errors.length>0&&(0,t.jsx)("div",{style:{marginTop:12},children:(0,t.jsx)(c.y,{errors:["Please fix the validation errors above before generating"]})})]}),N&&(0,t.jsx)("p",{style:{color:"crimson",marginTop:12},children:N}),(0,t.jsxs)("p",{style:{marginTop:24,fontSize:12,color:"#555"},children:["To include leave, call the API directly with a JSON body including a ",(0,t.jsx)("code",{children:"leave"})," array of ","{ Engineer, Date, Reason }","."]}),A&&(0,t.jsx)(p,{data:D,isVisible:L,onClose:()=>T(!1),onDownload:e=>{let a,s;if(!D)return;let t=D[e];if(!t)return;"csv"===e?(a=new Blob([t],{type:"text/csv;charset=utf-8"}),s="schedule-".concat(new Date().toISOString().split("T")[0],".csv")):"xlsx"===e?(a=t,s="schedule-".concat(new Date().toISOString().split("T")[0],".xlsx")):(a=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),s="schedule-".concat(new Date().toISOString().split("T")[0],".json"));let i=window.URL.createObjectURL(a),n=document.createElement("a");n.href=i,n.download=s,document.body.appendChild(n),n.click(),n.remove(),window.URL.revokeObjectURL(i)}})]})})}},1163:function(e,a,s){e.exports=s(3079)}},function(e){e.O(0,[901,748,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);