(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{8972:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/simple",function(){return n(4528)}])},2692:function(e,t,n){"use strict";n.d(t,{ci:function(){return y},eN:function(){return w},fp:function(){return b},hA:function(){return h},mY:function(){return f},zX:function(){return j}});var r=n(5901),a=n(9711);let i=e=>{let t=e.trim();return/^[a-zA-ZÀ-ÿ\s\-'\.]+$/.test(t)&&t.length>0},l=e=>{try{let t=new Date(e);return!isNaN(t.getTime())&&0===t.getDay()}catch(e){return!1}},s=e=>{let t=e.map(e=>e.trim().toLowerCase());return new Set(t).size===t.length},o=e=>e.trim().replace(/\s+/g," "),d=e=>{let t=[],n=e.map(e=>o(e).toLowerCase());for(let r=0;r<n.length;r++)for(let a=r+1;a<n.length;a++){let i=n[r],l=n[a];i===l?t.push('"'.concat(e[r],'" and "').concat(e[a],'" are identical when normalized')):c(i,l)>.8&&t.push('"'.concat(e[r],'" and "').concat(e[a],'" are very similar - possible duplicates?'))}return t},c=(e,t)=>{let n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(0===n.length)return 1;let a=u(n,r);return(n.length-a)/n.length},u=(e,t)=>{let n=Array(t.length+1).fill(null).map(()=>Array(e.length+1).fill(null));for(let t=0;t<=e.length;t++)n[0][t]=t;for(let e=0;e<=t.length;e++)n[e][0]=e;for(let r=1;r<=t.length;r++)for(let a=1;a<=e.length;a++){let i=e[a-1]===t[r-1]?0:1;n[r][a]=Math.min(n[r][a-1]+1,n[r-1][a]+1,n[r-1][a-1]+i)}return n[t.length][e.length]},p=r.Ry({engineer:r.Z_().min(1,"Engineer name is required").max(100,"Engineer name too long").refine(i,"Engineer name contains invalid characters"),date:r.Z_().regex(/^\d{4}-\d{2}-\d{2}$/,"Date must be in YYYY-MM-DD format"),reason:r.Z_().max(200,"Reason too long").optional().default("")}),g=r.Ry({weekend:r.Rx().int().min(0).max(5).default(0),chat:r.Rx().int().min(0).max(5).default(0),oncall:r.Rx().int().min(0).max(5).default(1),appointments:r.Rx().int().min(0).max(5).default(2),early:r.Rx().int().min(0).max(5).default(0)}),m=r.Ry({engineers:r.IX(r.Z_().min(1,"Engineer name cannot be empty")).length(6,"Exactly 6 engineers are required").refine(e=>e.every(e=>i(e.trim())),"All engineer names must contain only letters, spaces, hyphens, apostrophes, and basic diacritics").refine(s,"Engineer names must be unique (case-insensitive)").transform(e=>e.map(e=>o(e))),start_sunday:r.Z_().regex(/^\d{4}-\d{2}-\d{2}$/,"Date must be in YYYY-MM-DD format").refine(l,"Start date must be a Sunday"),weeks:r.Rx().int("Weeks must be a whole number").min(1,"At least 1 week required").max(52,"Maximum 52 weeks allowed"),seeds:g.default({}),leave:r.IX(p).default([]),format:r.Km(["csv","xlsx","json"]).default("csv")}),x=r.Ry({name:r.Z_().min(1,"Engineer name is required"),status:r.Km(["WORK","OFF","LEAVE",""]).default(""),shift:r.Z_().default("")});r.Ry({date:r.Z_().regex(/^\d{4}-\d{2}-\d{2}$/,"Invalid date format"),day:r.Km(["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]),week_index:r.Rx().int().min(0),early1:r.Z_().default(""),early2:r.Z_().default(""),chat:r.Z_().default(""),oncall:r.Z_().default(""),appointments:r.Z_().default(""),engineers:r.IX(x)});let h=e=>{try{let t=e.split(",").map(e=>e.trim()).filter(Boolean);if(6!==t.length)return{isValid:!1,errors:["Expected exactly 6 engineers, got ".concat(t.length)],warnings:[]};let n=t.filter(e=>!i(e));if(n.length>0)return{isValid:!1,errors:["Invalid engineer names: ".concat(n.join(", "))],warnings:[]};if(!s(t))return{isValid:!1,errors:["Engineer names must be unique (case-insensitive)"],warnings:[]};let r=d(t),a=t.map(e=>o(e));return{isValid:!0,errors:[],warnings:r,data:a}}catch(e){return{isValid:!1,errors:["Failed to parse engineer names"],warnings:[]}}},f=e=>{try{if(!e)return{isValid:!1,errors:["Date is required"],warnings:[]};if(!/^\d{4}-\d{2}-\d{2}$/.test(e))return{isValid:!1,errors:["Date must be in YYYY-MM-DD format"],warnings:[]};let t=new Date(e);if(isNaN(t.getTime()))return{isValid:!1,errors:["Invalid date"],warnings:[]};let n=[];if(!l(e)){let t=y(e);n.push("Date is not a Sunday. Suggested: ".concat(t))}return{isValid:!0,errors:[],warnings:n,data:e}}catch(e){return{isValid:!1,errors:["Invalid date format"],warnings:[]}}},y=e=>{try{let t=new Date(e),n=t.getDay();if(0===n)return e;let r=new Date(t);return r.setDate(t.getDate()-n),r.toISOString().split("T")[0]}catch(t){return e}},b=e=>{try{let t=new Date(e),n=t.getDay();if(0===n)return e;let r=new Date(t);return r.setDate(t.getDate()+(7-n)),r.toISOString().split("T")[0]}catch(t){return e}},w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:52;if(!Number.isInteger(e))return{isValid:!1,errors:["Weeks must be a whole number"],warnings:[]};if(e<1)return{isValid:!1,errors:["At least 1 week is required"],warnings:[]};if(e>t)return{isValid:!1,errors:["Maximum ".concat(t," weeks allowed")],warnings:[]};let n=[];return e>26&&n.push("Generating more than 26 weeks may take longer to process"),{isValid:!0,errors:[],warnings:n,data:e}},j=e=>{try{let t=m.parse(e);return{isValid:!0,errors:[],warnings:[],data:t}}catch(e){if(e instanceof a.jm)return{isValid:!1,errors:e.errors.map(e=>"".concat(e.path.join("."),": ").concat(e.message)),warnings:[]};return{isValid:!1,errors:["Unknown validation error"],warnings:[]}}}},4528:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var r=n(5893),a=n(7294),i=n(2692);function l(){let[e,t]=(0,a.useState)("Engineer A, Engineer B, Engineer C, Engineer D, Engineer E, Engineer F"),[n,l]=(0,a.useState)(""),[s,o]=(0,a.useState)(8),[d,c]=(0,a.useState)("csv"),[u,p]=(0,a.useState)({weekend:0,chat:0,oncall:1,appointments:2,early:0}),[g,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)(null),[f,y]=(0,a.useState)(null),[b,w]=(0,a.useState)({isValid:!1,errors:[],warnings:[]});(0,a.useEffect)(()=>{let t={engineers:e.split(",").map(e=>e.trim()).filter(Boolean),start_sunday:n,weeks:s,seeds:u,leave:[],format:d};w((0,i.zX)(t))},[e,n,s,u,d]);let j=async()=>{m(!0),h(null),y(null);try{let t={engineers:e.split(",").map(e=>e.trim()).filter(Boolean),start_sunday:n,weeks:s,seeds:u,leave:[],format:d},r=(0,i.zX)(t);if(!r.isValid)throw Error("Validation failed: ".concat(r.errors.join(", ")));let a=await fetch("/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){let e=await a.text();throw Error("Failed to generate: ".concat(e))}if("json"===d){let e=await a.json();y(JSON.stringify(e,null,2))}else{let e=await a.text();y(e)}}catch(e){h(e.message||"Generation failed")}finally{m(!1)}};return(0,r.jsxs)("div",{style:{maxWidth:800,margin:"40px auto",padding:"20px",fontFamily:"Inter, system-ui, Arial",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:[(0,r.jsx)("h1",{style:{color:"#1f2937",marginBottom:"8px"},children:"Enhanced Team Scheduler"}),(0,r.jsx)("p",{style:{color:"#6b7280",marginBottom:"24px"},children:"Week starts on Sunday. Enter exactly 6 engineers with unique names."}),(0,r.jsxs)("div",{style:{marginBottom:20},children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Engineers"}),(0,r.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Engineer A, Engineer B, Engineer C, Engineer D, Engineer E, Engineer F",style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:20,marginBottom:20},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Start Date (Sunday)"}),(0,r.jsx)("input",{type:"date",value:n,onChange:e=>l(e.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Weeks"}),(0,r.jsx)("input",{type:"number",min:1,max:52,value:s,onChange:e=>o(parseInt(e.target.value)||1),style:{width:"100%",padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"14px"}})]})]}),(0,r.jsx)("h3",{style:{marginTop:20,marginBottom:12},children:"Seeds (fair rotation)"}),(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:12,marginBottom:20},children:["weekend","chat","oncall","appointments","early"].map(e=>(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px"},children:e}),(0,r.jsx)("input",{type:"number",min:0,max:5,value:u[e],onChange:t=>p({...u,[e]:parseInt(t.target.value||"0")}),style:{width:"100%",padding:"6px 8px",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"14px"}})]},e))}),(0,r.jsx)("h3",{style:{marginTop:20,marginBottom:12},children:"Output Format"}),(0,r.jsxs)("div",{style:{display:"flex",gap:16,marginBottom:20},children:[(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,r.jsx)("input",{type:"radio",name:"fmt",checked:"csv"===d,onChange:()=>c("csv")}),"CSV"]}),(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,r.jsx)("input",{type:"radio",name:"fmt",checked:"xlsx"===d,onChange:()=>c("xlsx")}),"Excel (.xlsx)"]}),(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,r.jsx)("input",{type:"radio",name:"fmt",checked:"json"===d,onChange:()=>c("json")}),"JSON"]})]}),!b.isValid&&b.errors.length>0&&(0,r.jsxs)("div",{style:{padding:"12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"6px",marginBottom:"16px"},children:[(0,r.jsx)("h4",{style:{margin:"0 0 8px 0",color:"#dc2626"},children:"Validation Errors:"}),(0,r.jsx)("ul",{style:{margin:0,paddingLeft:"20px",color:"#dc2626"},children:b.errors.map((e,t)=>(0,r.jsx)("li",{children:e},t))})]}),(0,r.jsxs)("div",{style:{marginBottom:20},children:[(0,r.jsx)("button",{onClick:j,disabled:g||!b.isValid,style:{padding:"12px 24px",fontSize:"16px",backgroundColor:b.isValid?"#3b82f6":"#9ca3af",color:"white",border:"none",borderRadius:"6px",cursor:b.isValid?"pointer":"not-allowed",opacity:g?.7:1,marginRight:"12px"},children:g?"Generating...":"Generate Schedule"}),f&&(0,r.jsxs)("button",{onClick:()=>{let e,t;if(!f)return;"csv"===d?(e=new Blob([f],{type:"text/csv;charset=utf-8"}),t="schedule-".concat(new Date().toISOString().split("T")[0],".csv")):"json"===d?(e=new Blob([f],{type:"application/json"}),t="schedule-".concat(new Date().toISOString().split("T")[0],".json")):(e=new Blob([f],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),t="schedule-".concat(new Date().toISOString().split("T")[0],".xlsx"));let n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(n)},style:{padding:"12px 24px",fontSize:"16px",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"6px",cursor:"pointer"},children:["Download ",d.toUpperCase()]})]}),x&&(0,r.jsx)("div",{style:{padding:"12px",backgroundColor:"#fef2f2",border:"1px solid #fecaca",borderRadius:"6px",color:"#dc2626",marginBottom:"16px"},children:x}),f&&(0,r.jsxs)("div",{style:{marginTop:20},children:[(0,r.jsx)("h3",{children:"Generated Schedule"}),(0,r.jsx)("pre",{style:{backgroundColor:"#f9fafb",padding:"16px",borderRadius:"6px",overflow:"auto",fontSize:"12px",border:"1px solid #e5e7eb",maxHeight:"400px"},children:f})]}),(0,r.jsxs)("div",{style:{marginTop:32,padding:"16px",backgroundColor:"#f0f9ff",borderRadius:"6px",fontSize:"14px",color:"#0369a1"},children:[(0,r.jsx)("h4",{style:{margin:"0 0 8px 0"},children:"✨ Enhanced Features Available:"}),(0,r.jsxs)("ul",{style:{margin:0,paddingLeft:"20px"},children:[(0,r.jsx)("li",{children:"Fairness analysis and reporting"}),(0,r.jsx)("li",{children:"Decision logging for transparency"}),(0,r.jsx)("li",{children:"Multiple export formats (CSV, Excel, JSON)"}),(0,r.jsx)("li",{children:"Advanced validation and error handling"}),(0,r.jsx)("li",{children:"Real-time form validation"})]})]})]})}}},function(e){e.O(0,[901,888,774,179],function(){return e(e.s=8972)}),_N_E=e.O()}]);